<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>lzlz000</title>
  
  
  <link href="http://blog.lzlz.site/atom.xml" rel="self"/>
  
  <link href="http://blog.lzlz.site/"/>
  <updated>2020-11-13T09:06:40.491Z</updated>
  <id>http://blog.lzlz.site/</id>
  
  <author>
    <name>lzlz000</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>python判断重复音乐</title>
    <link href="http://blog.lzlz.site/2020/11/13/%E5%88%A4%E6%96%AD%E9%9F%B3%E4%B9%90%E9%87%8D%E5%A4%8D/"/>
    <id>http://blog.lzlz.site/2020/11/13/%E5%88%A4%E6%96%AD%E9%9F%B3%E4%B9%90%E9%87%8D%E5%A4%8D/</id>
    <published>2020-11-13T08:33:58.000Z</published>
    <updated>2020-11-13T09:06:40.491Z</updated>
    
    <content type="html"><![CDATA[<p>需要安装库eyed3</p><pre><code class="hljs shell">pip install eyed3</code></pre><h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><p>遍历文件，用eyed3解析音乐信息，通过音乐的长度来判断是否重复，长度是这样的数据： <em>333.91380609797875</em>，对于不同的音乐来说是很难重复的，可以把它当做一个hash函数来使用了，而且相比于真正的hash函数，如同时下载了一个低清和高清版本，他仍然可以找到重复音乐</p><pre><code class="hljs python"><span class="hljs-keyword">import</span> eyed3<span class="hljs-keyword">import</span> os<span class="hljs-keyword">import</span> re<span class="hljs-comment"># 把不用遍历的文件和目录放在这</span>ignore_list = [<span class="hljs-string">&#x27;script.py&#x27;</span>, <span class="hljs-string">&#x27;其他&#x27;</span>]count_music_by_length = &#123;&#125;repeat_list_maybe = []except_list = []<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">loadMusic</span>(<span class="hljs-params">file_name</span>):</span>  audiofile = eyed3.load(file_name)  <span class="hljs-keyword">if</span> audiofile <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:    <span class="hljs-comment"># 根据歌曲长度大致判断是否重复，注意不要用int, 长度是有很多小数位的，保存为整数会有很多歌曲重复</span>    music_length = <span class="hljs-built_in">str</span>(audiofile.info.time_secs)    music_list = count_music_by_length.setdefault(music_length, [])    music_list.append(file_name)    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">len</span>(music_list) &gt; <span class="hljs-number">1</span>):      repeat_list_maybe.append(<span class="hljs-string">&quot; &quot;</span>.join(music_list))    <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>  <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">walkFile</span>(<span class="hljs-params">path</span>):</span>  <span class="hljs-keyword">for</span> root, dirs, files <span class="hljs-keyword">in</span> os.walk(path):    dirname = os.path.basename(root)    <span class="hljs-keyword">if</span> (dirname <span class="hljs-keyword">in</span> ignore_list):      <span class="hljs-keyword">continue</span>    print(<span class="hljs-string">&quot;\n-----当前目录&quot;</span>, dirname)    <span class="hljs-comment"># 遍历文件</span>    <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> files:      <span class="hljs-keyword">if</span> (file <span class="hljs-keyword">in</span> ignore_list):        <span class="hljs-keyword">continue</span>      <span class="hljs-keyword">try</span> :        file_path = os.path.join(root, file)        <span class="hljs-comment"># 暂时只能支持mp3格式</span>        <span class="hljs-keyword">if</span> re.search(<span class="hljs-string">r&#x27;\.(mp|MP)3$&#x27;</span>, file):          <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> loadMusic(file_path):            except_list.append(<span class="hljs-string">&quot;eyed3.load 加载失败:&quot;</span> + file_path)      <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:        except_list.append(<span class="hljs-string">&quot;未知错误:&quot;</span>+ file + <span class="hljs-string">&quot; 错误：&quot;</span> + <span class="hljs-built_in">str</span>(e))    print(<span class="hljs-string">&quot;-----end-----&quot;</span>, dirname)<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:  walkFile(<span class="hljs-string">&#x27;./&#x27;</span>)  print(<span class="hljs-string">&quot;可能重复的音乐：\n&quot;</span>, <span class="hljs-string">&quot;\n&quot;</span>.join(repeat_list_maybe))</code></pre><p>运行结果</p><pre><code class="hljs jboss-cli">可能重复的音乐： <span class="hljs-string">./</span>齊豫 - 欲水<span class="hljs-string">.mp3</span> <span class="hljs-string">./</span>齐豫 - 欲水<span class="hljs-string">.MP3</span> <span class="hljs-string">./</span>韩红,林俊杰 - 飞云之下<span class="hljs-string">.mp3</span> <span class="hljs-string">./music.ghpym.com</span>\飞云之下 - 韩红&amp;林俊杰<span class="hljs-string">.mp3</span> <span class="hljs-string">......</span></code></pre><h4 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h4><ol><li>部分音乐播放器来源的音乐是无法读取和修改文件信息的，这时 eyed3.load会返回空值，这种音乐在windows上都是无法编辑详细信息的，不知如何处理 没办法处理</li><li>暂时只能支持mp3格式</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;需要安装库eyed3&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs shell&quot;&gt;pip install eyed3&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&quot;思路&quot;&gt;&lt;a href=&quot;#思路&quot; class=&quot;headerlink&quot; title=&quot;思路&quot;&gt;&lt;/a&gt;思</summary>
      
    
    
    
    
    <category term="python" scheme="http://blog.lzlz.site/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>将树莓派连接到公网</title>
    <link href="http://blog.lzlz.site/2020/11/09/%E5%B0%86%E6%A0%91%E8%8E%93%E6%B4%BE%E8%BF%9E%E6%8E%A5%E5%88%B0%E5%85%AC%E7%BD%91/"/>
    <id>http://blog.lzlz.site/2020/11/09/%E5%B0%86%E6%A0%91%E8%8E%93%E6%B4%BE%E8%BF%9E%E6%8E%A5%E5%88%B0%E5%85%AC%E7%BD%91/</id>
    <published>2020-11-08T16:10:49.000Z</published>
    <updated>2020-11-11T12:07:10.046Z</updated>
    
    <content type="html"><![CDATA[<h3 id="连接公网"><a href="#连接公网" class="headerlink" title="连接公网"></a>连接公网</h3><p>要想把运行在本地的树莓派连接到公网访问，通常有两种方式。</p><h3 id="公网IP-DDNS"><a href="#公网IP-DDNS" class="headerlink" title="公网IP+DDNS"></a>公网IP+DDNS</h3><p>首先要确认你的网络是通过宽带直连互联网，没有复杂的局域网环境，且拥有直连互联网的路由器/pc的权限。公网IP需要你的宽带运营商提供，这个IP仍然是动态的，即每次连接宽带，公网IP都会变化。如果需要一个稳定的入口则需要搭配域名和DDNS使用。</p><h4 id="索要ip"><a href="#索要ip" class="headerlink" title="索要ip"></a>索要ip</h4><p>宽带上网时，公网能看到的宽带运营商的IP地址（直接百度搜索“ip”即可查到自己的公网IP），是无法直接访问到你的计算机或者路由器的。可以理解为，公网IP和本地宽带入口之间还有一层路由信息，通过公网IP，外网的连接无法寻找到你的计算机。需要运营商给你的宽带一些特殊的配置。</p><p>电信宽带索要成功概率较大，不过不同地区也不太一样，比如我就要不到。但是我听一些朋友说，这也是有技巧的，不要直说，可以说_“家里安装监控，需要把网络改成桥接模式”_。</p><h4 id="DDNS"><a href="#DDNS" class="headerlink" title="DDNS"></a>DDNS</h4><p>外网可以访问到本地计算机了，但是想要从外网访问必须要记住经常变动的IP地址，十分不便。</p><p>DNS解析就是把 xxx.com这样的网址解析到 123.234.123.234这样的IP地址，更方便使用。DDNS即动态DNS，就是定时修改xxx.com所解析的地址，这样就不需要记住变更的IP了。</p><p> 一般路由器都有这种功能，我使用过TP-LINK和小米路由器，在路由器管理界面都有DDNS的设置方式。还是建议使用TPLINK，tplink有官方提供的免费DDNS服务，小米只能设置网上第三方提供的服务，这些服务可能要注册额外账号，也可能要收费。</p><p>TPLINK为例，创建新域名后，你就会得到一个 这样的域名 xxx.tpddns.cn，你可以把它映射到树莓派的内网IP上，通过xxx.tpddns.cn域名访问到路由器的流量都会被发送到树莓派上，树莓派上的服务就可以在公网访问了。</p><h3 id="内网穿透"><a href="#内网穿透" class="headerlink" title="内网穿透"></a>内网穿透</h3><p>公网IP+DDNS是最好的解决方案，但是宽带公网IP有时候很难获取。内网穿透也是一种解决方案。</p><h4 id="服务提供商"><a href="#服务提供商" class="headerlink" title="服务提供商"></a>服务提供商</h4><p>花生壳应该是国内最著名的内网穿透服务的提供商了，如果你需要稳定的外网访问，可以考虑，不过既然都是玩树莓派了，一般不是这样的需求。花生壳免费版限制较多，收费版性价比不高。</p><p>国外的 <a href="https://ngrok.com/">ngrok</a> 不错，推荐使用它的免费版，收费版不推荐，容易被墙，费用稍贵于国内服务（但一个收费账号可以同时使用多个通道），最重要的是不支持微信支付宝付款。免费版不支持自定义域名，且ngrok提供的域名会定期更换，不太方便。</p><p>国内推荐 <a href="https://www.ngrok.cc/">sunny-ngrok</a> 和 <a href="https://www.natfrp.com/">sakura frp</a>。国内不推荐免费版，首先收费很便宜，一般1个通道&lt;=10元一个月，有时候搞活动还会打折。同时国内的白嫖党太多了，免费服务器用户太多很不稳定。</p><p>注意内网穿透很多都是按通道计费的，如你需要一个ssh和一个web服务那就要两个隧道，以此类推。如果追求稳定，就不建议免费版。 所以公网IP+DDNS的方式还是最好的。</p><h4 id="自己搭建服务"><a href="#自己搭建服务" class="headerlink" title="自己搭建服务"></a>自己搭建服务</h4><p>如果你有云服务器，可以自己搭建ngrok或者frp服务，自行搜索教程。由于云服务器通常价格较高，可以买低配服务器搭建内网穿透连接运行在本地的主机。如果是搭建云存储类的，建议流量付费，固定带宽速度太慢，可以考虑外网VPS，更加划算，还可以用于某些科学用途。如果是游戏服务器之类的，建议固定带宽，使用国内服务商延时低。</p><h3 id="注册域名"><a href="#注册域名" class="headerlink" title="注册域名"></a>注册域名</h3><p>最后建议注册一个域名，当然这不是必须的。内网穿透或者DDNS提供的域名，通常不可选择。想要更加方便灵活，就可以自己注册域名。配置DNS CNAME类型，把自定义的域名记录到例如上述的xxx.tpddns.cn，这样就可以通过自己的网址来访问自己的服务了。</p><p> 可选国内如阿里云腾讯云，或者国外，国内需要备案，比较慢且麻烦，国外容易被封不稳定。部分国外域名提供商不支持国内付款方式，还是推荐国内的。域名费用通常不贵，一年价格特别便宜（相当于促销吧），比如.top .site 等后缀的域名一年费用甚至小于10元，尝鲜建议注册一年。如果要注册更长时间，建议一次性5年性价比较高，便宜的域名5年价格在100元多一点，相当划算。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;连接公网&quot;&gt;&lt;a href=&quot;#连接公网&quot; class=&quot;headerlink&quot; title=&quot;连接公网&quot;&gt;&lt;/a&gt;连接公网&lt;/h3&gt;&lt;p&gt;要想把运行在本地的树莓派连接到公网访问，通常有两种方式。&lt;/p&gt;
&lt;h3 id=&quot;公网IP-DDNS&quot;&gt;&lt;a href=&quot;#</summary>
      
    
    
    
    
    <category term="树莓派" scheme="http://blog.lzlz.site/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/"/>
    
  </entry>
  
  <entry>
    <title>使用树莓派</title>
    <link href="http://blog.lzlz.site/2020/11/08/%E4%BD%BF%E7%94%A8%E6%A0%91%E8%8E%93%E6%B4%BE/"/>
    <id>http://blog.lzlz.site/2020/11/08/%E4%BD%BF%E7%94%A8%E6%A0%91%E8%8E%93%E6%B4%BE/</id>
    <published>2020-11-08T15:05:45.000Z</published>
    <updated>2020-11-11T12:07:47.552Z</updated>
    
    <content type="html"><![CDATA[<p>阿里云腾讯云薅羊毛的廉价主机，性能有点烂，我有时在服务器上多部署了一些平时用的工具，就卡的不行。为了和朋友联机，我在阿里云1G2M的云服务器上部署了一个泰拉瑞亚的服务器，结果卡的大家都动不了。云服务商提供的高性能主机价格太高，薅羊毛也只有一次，因此我就想搞一台性能尚可的微型主机，同时还有一定可玩性就更好了。树莓派就是最好的选择了。</p><h3 id="系统选择"><a href="#系统选择" class="headerlink" title="系统选择"></a>系统选择</h3><p>我的树莓派型号是4B4GB，淘宝购买，不注明的话商家会给你预装系统，建议安装，减少麻烦。基于linux debian的官方系统Raspbian一般有三种版本lite（无图形化界面），桌面版，桌面版含常用软件。不建议第三个，里面包含了太多无用的东西，如果你用的是16g sb卡空间会捉襟见肘。而一般店家都会默认装第三个系统，建议提前沟通安装版本。当然为树莓派定制的系统镜像还有很多，Ubuntu、Arch Linux ARM等等。还有一些为硬件用途定制的系统，我并不太了解。</p><h3 id="连接wifi"><a href="#连接wifi" class="headerlink" title="连接wifi"></a>连接wifi</h3><p>通常购买树莓派不会购买屏幕，通过SSH或者VNC连接主机。那第一次上网该如何连接？</p><ol><li>条件：有线网络，拥有路由器管理权限。 最简单的方式，直接插上就好了，在路由器管理上面找到 Raspberrypi 查看ip即可，默认账号密码与系统镜像有关，官方系统Raspbian 默认帐号：Username: pi Password: raspberry</li><li>无上述条件，在电脑上编辑烧录系统的SD卡。编辑其中的 <code>/boot/wpa_supplicant.conf</code> 文件。详细请看 <a href="https://shumeipai.nxez.com/2017/09/13/raspberry-pi-network-configuration-before-boot.html">https://shumeipai.nxez.com/2017/09/13/raspberry-pi-network-configuration-before-boot.html</a></li></ol><p>登录系统后编辑wifi账号密码的方式</p><pre><code class="hljs shell">sudo raspi-config</code></pre><p>选择 network options-&gt;wireless LAN 然后依次输入账号密码完成</p><h3 id="一些问题"><a href="#一些问题" class="headerlink" title="一些问题"></a>一些问题</h3><p>使用的Raspbian镜像自带的一些软件功能有问题。</p><h4 id="vim-键盘功能异常"><a href="#vim-键盘功能异常" class="headerlink" title="vim 键盘功能异常"></a>vim 键盘功能异常</h4><p>vim中键盘上部分按键无法使用（好像是树莓派键盘和标准键盘不同，所特别修改的）。可以卸载重装vim</p><pre><code class="hljs shell">sudo apt-get remove vim-commonsudo apt-get install vim</code></pre><p>然而<br>apt-get报错：</p><pre><code class="hljs less"><span class="hljs-attribute">dpkg</span>: 无法恢复的致命错误，中止: 软件包 <span class="hljs-attribute">libssh-gcrypt-4</span>:armhf 的文件名列表文件缺少最后结尾的换行符</code></pre><p>解决方法：</p><pre><code class="hljs shell">cd /var/lib/dpkg/infols libssh-gcrypt* ls libssh-gcrypt* <span class="hljs-meta">#</span><span class="bash">删除报错文件 并重装该模块</span>sudo rm libssh-gcrypt*sudo apt-get reinstall libssh-gcrypt-4</code></pre><h4 id="SD卡容量异常"><a href="#SD卡容量异常" class="headerlink" title="SD卡容量异常"></a>SD卡容量异常</h4><pre><code class="hljs ebnf"><span class="hljs-attribute">df -h</span></code></pre><p>发现16G SD卡可用空间只有7G，不是无良商家的假冒伪劣产品，是树莓派默认隐藏了一部分空间（我不懂为啥要这么做）</p><p>解决方法：</p><pre><code class="hljs shell">sudo raspi-config</code></pre><p>依次选择 -&gt;Advanced Options -&gt;Expand Filesystem</p><h4 id="卸载不必要的软件"><a href="#卸载不必要的软件" class="headerlink" title="卸载不必要的软件"></a>卸载不必要的软件</h4><p>系统中可能有一些不需要的软件，尤其是安装了图形化界面版本系统的。</p><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> 搜索已安装软件 </span>dpkg -l| grep Xxx<span class="hljs-meta">#</span><span class="bash"> 根据搜索到的软件，选择删除</span>sudo apt remove xxxsudo apt-get autoremove --purge</code></pre><h3 id="自启动服务"><a href="#自启动服务" class="headerlink" title="自启动服务"></a>自启动服务</h3><p>通常我们使用树莓派这类主机，都会要跑一些常年在线的服务：web服务器，游戏服务器等等。</p><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> 新建一个文件</span>touch my.service</code></pre><p>编辑文件</p><pre><code class="hljs routeros">[Unit]<span class="hljs-attribute">Description</span>=My<span class="hljs-built_in"> service </span># 服务介绍<span class="hljs-attribute">After</span>=network.target[Service]<span class="hljs-attribute">ExecStart</span>=/usr/bin/java -jar /home/pi/services/my-server-0.0.1.jar --server.<span class="hljs-attribute">port</span>=9000 # 要运行的程序，注意使用绝对路径<span class="hljs-comment"># 服务要使用的目录，注意如果程序内配置使用的目录和不再这个路境内，会无法编辑。如服务器配置日志输出路径为/log，那按下方设置/data/my-server将无法输出日志</span><span class="hljs-attribute">WorkingDirectory</span>=/data/my-server[Install]<span class="hljs-attribute">WantedBy</span>=multi-user.target</code></pre><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> 把配置好的脚本复制到systemctl的目录</span>sudo cp my.service /etc/systemd/system/my.service<span class="hljs-meta">#</span><span class="bash"> 重新加载</span>sudo systemctl daemon-reload sudo systemctl start myscript.service # 尝试启动sudo systemctl status myscript.service  # 查看服务状态，可以看到服务输出的日志，方便排查问题sudo systemctl enable myscript.service  # 开机时自动运行</code></pre><p>注意，有时候后台运行的程序使用会使用nohup xxxx &amp;的方式启动，千万不要自systemctl的ExecStart脚本汇总使用nohup，会导致启动失败。本来每个service就维护着一个独立的进程，nohup没有意义了。</p><h3 id="samba共享文件"><a href="#samba共享文件" class="headerlink" title="samba共享文件"></a>samba共享文件</h3><p>使用samba服务局域网共享文件</p><pre><code class="hljs shell">sudo apt-get install samba samba-client</code></pre><p>配置smb.conf文件 <code>/etc/samba/smb.conf </code>，尾部添加</p><pre><code class="hljs applescript">[<span class="hljs-literal">pi</span>]workgroup = <span class="hljs-literal">pi</span> <span class="hljs-comment">#名字随意起</span>security = <span class="hljs-literal">pi</span>netbios <span class="hljs-built_in">name</span> = <span class="hljs-literal">pi</span>comment = <span class="hljs-literal">pi</span> homepath = /media/<span class="hljs-literal">pi</span>/mnt <span class="hljs-comment"># 我的外接移动硬盘的挂载位置</span>browsable = yeswriteable = yes<span class="hljs-built_in">read</span> only = no</code></pre><h4 id="samba读写速度慢"><a href="#samba读写速度慢" class="headerlink" title="samba读写速度慢"></a>samba读写速度慢</h4><p>在局域网传输速率文档在2m左右，且响应速度慢如，直接打开samba共享的电影，跳转到指定位置可能会卡顿。</p><p>解决方法（不完善，待研究）</p><p>编辑 <code>/etc/samba/smb.conf </code>，[global] 下添加参数:</p><pre><code class="hljs arduino"><span class="hljs-built_in">min</span> receivefile <span class="hljs-built_in">size</span> = <span class="hljs-number">16384</span><span class="hljs-built_in">write</span> cache <span class="hljs-built_in">size</span> = <span class="hljs-number">262144</span></code></pre><p>重启服务，响应速度已经完全正常了，看电影不卡了，速度提升到 5-6mb/s+，仍旧不理想，也许和路由器性能、网络环境、树莓派本身性能、操作系统、usb接口的带宽等等因素有关，未能进一步找到原因。</p><h3 id="外部网络访问树莓派"><a href="#外部网络访问树莓派" class="headerlink" title="外部网络访问树莓派"></a>外部网络访问树莓派</h3><p>请看这一篇-&gt; <a href="/2020/11/09/%E5%B0%86%E6%A0%91%E8%8E%93%E6%B4%BE%E8%BF%9E%E6%8E%A5%E5%88%B0%E5%85%AC%E7%BD%91/">将树莓派连接到公网</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;阿里云腾讯云薅羊毛的廉价主机，性能有点烂，我有时在服务器上多部署了一些平时用的工具，就卡的不行。为了和朋友联机，我在阿里云1G2M的云服务器上部署了一个泰拉瑞亚的服务器，结果卡的大家都动不了。云服务商提供的高性能主机价格太高，薅羊毛也只有一次，因此我就想搞一台性能尚可的微型</summary>
      
    
    
    
    
    <category term="树莓派" scheme="http://blog.lzlz.site/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/"/>
    
  </entry>
  
  <entry>
    <title>升级hexo</title>
    <link href="http://blog.lzlz.site/2020/11/04/update_hexo/"/>
    <id>http://blog.lzlz.site/2020/11/04/update_hexo/</id>
    <published>2020-11-04T14:44:48.000Z</published>
    <updated>2020-11-11T12:08:21.018Z</updated>
    
    <content type="html"><![CDATA[<p>长时间没有使用，本地的hexo版本是3.8</p><pre><code class="hljs yaml"><span class="hljs-string">&gt;</span> <span class="hljs-string">hexo</span> <span class="hljs-string">version</span><span class="hljs-attr">hexo:</span> <span class="hljs-number">3.8</span><span class="hljs-number">.0</span><span class="hljs-attr">hexo-cli:</span> <span class="hljs-number">2.0</span><span class="hljs-number">.0</span><span class="hljs-attr">os:</span> <span class="hljs-string">Windows_NT</span> <span class="hljs-number">10.0</span><span class="hljs-number">.18363</span> <span class="hljs-string">win32</span> <span class="hljs-string">x64</span><span class="hljs-attr">http_parser:</span> <span class="hljs-number">2.8</span><span class="hljs-number">.0</span><span class="hljs-attr">node:</span> <span class="hljs-number">10.1</span><span class="hljs-number">.0</span><span class="hljs-attr">v8:</span> <span class="hljs-number">6.6</span><span class="hljs-number">.346</span><span class="hljs-number">.27</span><span class="hljs-string">-node.6</span><span class="hljs-attr">uv:</span> <span class="hljs-number">1.20</span><span class="hljs-number">.2</span><span class="hljs-attr">zlib:</span> <span class="hljs-number">1.2</span><span class="hljs-number">.11</span><span class="hljs-attr">ares:</span> <span class="hljs-number">1.14</span><span class="hljs-number">.0</span><span class="hljs-attr">modules:</span> <span class="hljs-number">64</span><span class="hljs-attr">nghttp2:</span> <span class="hljs-number">1.29</span><span class="hljs-number">.0</span><span class="hljs-attr">napi:</span> <span class="hljs-number">3</span><span class="hljs-attr">openssl:</span> <span class="hljs-number">1.1</span><span class="hljs-string">.0h</span><span class="hljs-attr">icu:</span> <span class="hljs-number">61.1</span><span class="hljs-attr">unicode:</span> <span class="hljs-number">10.0</span><span class="hljs-attr">cldr:</span> <span class="hljs-number">33.0</span><span class="hljs-attr">tz:</span> <span class="hljs-string">2018c</span></code></pre><p>升级执行 </p><pre><code class="hljs avrasm">npm i hexo-<span class="hljs-keyword">cli</span> -g</code></pre><p>等待升级完成…此时再次执行<code>hexo version</code>， 报错，原来本地的node环境还是版本10，于是升级node，windows环境下升级node最好还是官网下载安装包。</p><p>升级完成后再次执行<code>hexo version</code>， 升级成功。</p><p>更换主题，我一直使用的是默认的 landscape 主题，自己修改里面的模板文件ejs来满足需求。尝试了几个主题之后我选择了 <a href="https://hexo.fluid-dev.com/">fluid</a>，原因是它自带的搜索功能太好用了，可以搜索正文。这正是我想要的，本来就主要是写给自己看的，方便后面回来查找。其实是内置了hexo-generator-search插件，然而我以前并不知道，永远滴神。配置也非常丰富，虽然默认风格不是太喜欢，不过很容易修改。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;长时间没有使用，本地的hexo版本是3.8&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;hljs yaml&quot;&gt;&lt;span class=&quot;hljs-string&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;hexo&lt;/span&gt; &lt;span </summary>
      
    
    
    
    
    <category term="hexo" scheme="http://blog.lzlz.site/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>过去的一年(4) 年轻人患上癌症，除了健康还会失去什么</title>
    <link href="http://blog.lzlz.site/2020/11/02/last-year-4/"/>
    <id>http://blog.lzlz.site/2020/11/02/last-year-4/</id>
    <published>2020-11-02T14:20:07.000Z</published>
    <updated>2020-11-08T17:20:23.986Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://lzlz000.github.io/">个人主页</a></p><p>大半年的治疗快要结束了，我已经跟公司沟通过，即将回到工作岗位。作为一个癌症患者，我应该算是比较幸运的。首先最重要的是疾病是有望治愈的，生活还是有希望的。我的亲人也对我很好，尽力为我提供了好的治疗方式，家庭积蓄也还够应付这场灾难生活水平没有受到很大影响。很多病友都因病失业，原本以为长时间的请病假，我可能要失去工作了，结果工作单位对我也不错，虽然领导对我是否有能力回归工作还有疑虑，但是我最终还是留了下来。</p><p>癌症患者大多数是50-60岁或更年长的中老年人，我在放疗科排队治疗时，看见医生电脑上的数据，跟我一起治疗的病友们大多数都是这个年龄，年轻人只有我和一个19岁的女孩两个倒霉蛋。在50-60岁的年龄，除了疾病本身一般不用再考虑别的问题。我这样的年龄正是努力发展的时候，即时疾病没有复发，这样的遭遇也会对今后的人生产生重大影响。首先，疾病有复发的风险，这件事情始终是我头上的一块阴影，挥之不去。我实在无法承担如此代价，如果我需要面对最坏的情况，很难想象我父母今后的日子要如何度过。我妈曾经跟我说过，外婆和我都是她最亲的人，外婆生病去世，虽然她很难过，最终是能走出来的，毕竟生老病死是自然规律。但是我生重病，让她最无法接受，即便现在还是好的希望大一些。</p><p>再就是工作问题，大家都在努力工作，画着饼当着资本家的韭菜，希望升职加薪走向人生巅峰。或者走向体制内，工作更加稳定一些。生了病，总会想要求得个安稳，自然就会想到能不能考公务员？不好意思这条路已经堵死了，我咨询过本地的相关部门，恶性肿瘤病史体检一般做不合格处理，即便已经治愈多年。之前由于公司的一些疑虑，我一直以为工作没了，等病好了要重新找工作。在治病的后期，身体状况好的时候我也尝试去参加过几次面试，拿到过一些offer，面试好过入职很难。两个问题，现在很多职位需要提供上家公司的收入证明，然而我大半年没有收入我也不敢说自己是因为患病治疗所致（按照法律规定我的工作年限只有三个月病假工资可以发，且显著低于正常工资收入）。其次，治疗后体内还有残留的肿瘤尸体，一时半会还无法消失，体检可能会有异常，这一条更加适用于手术后的朋友，身体部分器官组织永久缺失，身上还有明显的伤疤，体检是一定会发现的。你可以说你已经好了和正常人一样工作，但是人家凭什么给自己增加风险？如果再生病不但会耽误工作，而且公司还要按照法律义务提供病假工资和社保。</p><p>第二就是感情问题了。我认识一位和我年级差不多的病友，他和女朋友大学就恋爱，在一起五六年了，都准备谈婚论嫁了，结果生病就分手了。理性想想，现在结婚现在都搞得跟商业谈判似的，更没有人会愿意与你共同承担今后不管是10%还是20% 30%的复发风险，除了你的父母他们是没有选择的。当然这世上有没有真爱呢，我想是有的，不过这也是个概率问题。一方面我认为现在大多数人都是比较现实的吧，另一方面父母对于子女也是真爱呀，他们觉得你和这样的另一半在一起，未来风险太大，有这样的阻力在，分手也很合理了。由此而来导致另一个问题，除了最近的几个亲人，我妈从不跟亲戚朋友提起我生病的事情，就怕今后对我的恋爱结婚产生影响。也命令我对多数同学朋友保密，连同学聚会都不让我参加。生病期间出去散步，就怕碰到熟人，为啥工作日在家里？为啥把头发剃光了？为啥皮肤上好多伤（化疗皮肤毒性有点多，好多皮肤破损，甚至有点烂）？ 我已经如此倒霉了，还要像是一个鬼鬼祟祟的逃犯。</p><p>在血液科病房住院期间，我见过了15岁的男生高危白血病，30多岁两个孩子的妈妈被复发的淋巴瘤折磨的疼痛难忍，不知是自己还是亲人确诊疾病后在谈话间嚎啕大哭的女生。我没法帮助他们做什么，就觉得自己即便这样也还算幸运。现在我对生活的期望值真的不高，对工作上没什么要求，现在这些薪水也够我用了，今后能不能有另一半也不是那么重要，安安稳稳的工作，培养自己的爱好，平平安安的过日子就好了。</p><p>不开心的事情就到这里结束吧，end</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://lzlz000.github.io/&quot;&gt;个人主页&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;大半年的治疗快要结束了，我已经跟公司沟通过，即将回到工作岗位。作为一个癌症患者，我应该算是比较幸运的。首先最重要的是疾病是有望治愈的，生活还是有希望的。我的亲人也对我很</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>过去的一年(3) 关于癌症治疗的一些过程和想法</title>
    <link href="http://blog.lzlz.site/2020/11/01/last_year-3/"/>
    <id>http://blog.lzlz.site/2020/11/01/last_year-3/</id>
    <published>2020-11-01T12:32:51.000Z</published>
    <updated>2020-11-02T16:42:54.160Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://lzlz000.github.io/">个人主页</a></p><p><em>本来我写博客的目的为了学习整理知识的，就不在这一年的故事上过多的纠结了，这篇一次性写完吧。还是科学理性为主，少写没用的。</em></p><p>2020年3月19日，我的确诊结果终于出来了：经典型霍奇金淋巴瘤。这是一种治愈率相当高的恶性肿瘤，多数人可以治愈。当然坏消息就是分期比较靠后，我已经是4期了，不过仍有不低的治愈希望。顺便说一下淋巴瘤分期方式 <em>Ann Arbor分期系统</em>  和实体肿瘤的常见的分期方式 <em>TNM分期系统</em> 是完全不同的，拿两个不同系统的参数来做比较意义不大。</p><p>人的心理是个很奇怪的东西，如果直接告诉我我患上了淋巴瘤，大约有30-40%无法治愈，我应该非常惊恐。但是当我一开始一直认为自己活下来需要奇迹的时候，转过头来得到这样的结果，我居然是开心的。我那天胃口很好，我甚至想和我父母庆祝一下，去外面吃点好的，无奈疫情期间很多餐馆都没开门。</p><p>如果疑似患上了恶性肿瘤性的疾病，对于疾病状况的评估，请找三甲医院的专科医生。如果条件允许尽量去权威的大医院 ，至少是在确诊、确定治疗方案、中期治疗评估等关键步骤上，最好应该去权威机构，对于患者的好处是非常多的，至少有以下几个方面：</p><ol><li>恶性肿瘤的病理类型千变万化，对于具体的细分类型，小医院的病理科甚至可能很少见过，误诊的可能性大大增加。这点以淋巴瘤最为明显，很多种类淋巴瘤的组织表现的非常相似，需要有丰富经验的人来判断。如果一开始路就走错了，对于治疗会有非常大的影响。</li><li>治疗方案的选择，由于科技的进步，癌症的治疗方案常常会有一些改进，或者全新的效果更好的治疗方法出现，权威医疗机构往往是最先掌握这些信息和技术的地方。能进一步增加疾病治愈、控制的可能性。</li><li>大多数肿瘤患者需要手术治疗，相比放化疗等通过固定药物或者机械完成的治疗，手术对个人能力要求很高，经验丰富的外科医生能够最大限度的提高治疗效果和降低对身体的伤害。</li></ol><p>个人认为如果不是东南沿海发达地区（发达地区相当多地方的地市三甲医院的水平已经非常高了），尽量应该去省会的肿瘤专科医院或者权威的综合医院治疗。但是如果你不是家住大城市且对当地人生地不熟，去大医院的求医之路会非常累人，但是我认为如果经济问题可以解决，这个问题是值得克服的，只是要有一定的思想准备。当然钱也是无法回避的因素，还有6亿人的人均收入不超过1000元，很多家庭面对动辄十万元数十万元的治疗费用，确实很难，这个问题之后有空我会继续吐槽。</p><p>我经常在疾病社区论坛上、病友群里等地方看到类似言论</p><blockquote><p>张三： xxx癌好治，我们家xxx都10几年了非常健康</p><p>李四： ***，这个病治不好的，我爷爷也是这个病，三个月人就没了</p><p> 张三： 我放化疗期间经常吃xxx，显著降低了副作用，推荐大家试试</p><p>李四： ***，我一点用没有？</p></blockquote><p>恶性肿瘤千变万化，人体结构纷繁复杂，对于别人的病情的个案，其实参考价值非常有限。决定治疗效果的因素非常多，我们不可能像做数学题一样得到一个正确的标准答案。统计学在疾病的治疗和医学的进步中扮演重要的十分作用。对于复杂的人体，我们可以收集以往治疗的病例数据，以及健康人群的相关数据来做分析，为疾病的预防、检查、治疗方案的改进提供重要的参考。 例如，我们分别收集了1000个肺癌患者和1000个健康人的生活习惯数据，发现肺癌患者中抽烟的比例比健康人中高出5倍，那我们可以得出结论，抽烟更容易患上肺癌。再比如，1000个患者xx疾病的患者使用A方案化疗，1000个患者使用B方案物化疗，第一组相对于第二组疾病的治愈率提高了10%，那我们可以得出结论对于XX疾病的治疗A方案会更合适。实际的统计会复杂很多，涉及专业的统计学知识和医学知识，数据之间的关系也没有这么直接，分析更加困难。同时如果需要人体实验，也存在伦理的问题，让病人去尝试风险过高的方案是不道德的。数据的分析统计是计算机的专长，在如今的信息化时代，计算机技术也要发挥很大作用。例如，如今已经通过数据分析机器学习，来判断影像中息肉/结节是恶性肿瘤概率的技术，给医生作为参考依据。</p><p>如果你现在跟我说 <em>“我见过XXX天天抽烟喝酒活到100岁，你说的都是扯淡”</em>，那我建议你关掉页面，或者先理解一下什么是“概率”和“统计”，我觉得这对于理性客观地面对疾病，和决定治疗方案是有意义的。</p><p>具体到每一个患者，概率中冷冰冰的数字实在是无情。治愈率90%，你也有可能是那10%，治愈率5%可能你就是那个生命的奇迹。保持乐观的心态和健康的生活方式，对于疾病的治疗有利，但是它们对疾病的影响是有限的。打个比方，你考上了一所重点高中，这所高中80%的人能考上重点大学，但是你是不是这80%绝大部分在于你自己的努力；你患上了癌症，发现的不算晚，80%类似状况的患者可以治愈，但是你自己除了配合治疗，很难做些什么，你是不是这80%，得看天。没考上好的大学你仍然有光明的未来，而对于癌症，那不好的结果实在是太过沉重不可接受了，尤其是对于我这样的年轻人。因此作为一个患者，我常常有种命运不掌握在自己手里的感觉。</p><p>淋巴瘤是一种血液系统恶性肿瘤，大多数淋巴瘤对放化疗高度敏感，但是淋巴瘤非常容易通过遍布全身的淋巴结和淋巴管散播，难以通过手术清除干净，所以手术不是淋巴瘤的主要治疗手段。但是由于在病理确诊前，难以通过影像检查知道肿瘤类型，也有部分病友通过手术切除后才确诊，因为除了淋巴瘤大多数恶性肿瘤都需要手术治疗。我由于肿瘤生长位置不好且波及范围较广，倒也算躲过了一刀。</p><p>放化疗是淋巴瘤的主要治疗手段，相当大的比例的患者可以通过这种方式治愈疾病。对于比较危险的淋巴瘤类型或者复发难治的患者，医生还会建议进行自体骨髓移植。自体移植其实和我们印象中的骨髓移植，大多是指的他人捐献骨髓的异体移植还是不太一样的。自体移植其实是做一次超大计量的化疗来尽可能的杀死身体中残存的肿瘤细胞，这个剂量会超过身体耐受的极限，最先受不了的就是骨髓造血系统，因此提前抽取一部分保存起来，等化疗过后再输回体内。当然除了骨髓，身体的其他组织器官在如此大剂量的化疗下，也会备受摧残，副作用很大相当痛苦。但是相对于异体骨髓移植，风险很小，对于年轻或者身体条件较好的人基本没有生命危险，同时费用也要低得多。另外，靶向药物、免疫治疗等新疗法对于包括淋巴瘤在内的血液系统恶性肿瘤效果非常显著，也已经被广泛用于治疗中，缺点就是贵且很多情况下医保不报销。总的来说，各种治疗手段就像是医生和肿瘤在打牌，游戏规则是这样的：医生手里的牌可以一张一张出，也可以结合在一起出，如果出到了某组牌，肿瘤要不起你就赢了。如果游戏胜算不大时，合理的出牌顺序也能尽可能的拖延失败的时间。我们当然希望最理想的结局，医生的第一手牌就能干碎敌人获得胜利。</p><p>疾病确诊后，我开始接受化疗。化疗通常有较大的副作用，最常见的恶性呕吐，掉头发等。另外还会伤害造血系统和肝肾等器官，因此医生会让定期抽血检查相应功能，如有问题及时对症治疗。对于没有太多基础疾病或者高龄的患者来说，通常问题不大，但是也要严防意外发生。很多人应该都看过《滚蛋吧，肿瘤君》这部电影，女主角的原型实际上得了一种和我类似的疾病-原发纵隔大B细胞淋巴瘤，我不知道她的疾病是某些特殊的类型或者是剧本的需要说她难以治愈，据我了解目前这种疾病的治愈率是相当高的，不低于我所患上的淋巴瘤类型，但是她最终还是不幸去世。据我查到的资料，她的死因应该是化疗后免疫力低下时严重的肺部感染–这很有可能与她当时过多参与社会活动有关。从某种角度来说，她的盲目乐观可能害了她，原本还有治愈的希望，以这种方式离开是十分可惜的。</p><p>对于我个人而言，化疗反应算是比较轻的，恶心无力的症状通常两三天就不严重了，就当每个周期得了一次重感冒，休息几天，副作用就基本不再影响生活了。我的造血系统非常坚强，六个月的化疗，除了到了最后期白细胞略微低于正常值下限以外，血象一直比较正常。期间肝功能出线了一些小问题，经过简单的治疗后一切正常。 对我来说最痛苦的副作用来自于皮肤，我使用的药物产生了很大的皮肤毒性，身上的多处皮肤脱皮、裂口、破损，同时化疗使用的PICC置管处，由于药物的皮肤毒性加我对异物的过敏，严重的溃烂。 三天两头跑医院处理这些问题，还真是挺麻烦的。每个月会做一次检查评估治疗效果，有一种中学月考的感觉，紧张的等着成绩。第一个月我的咳嗽已经基本消失，CT显示肿瘤显著缩小。治疗4个月后又做了一次PET-CT进行中期评估，我没有没有足够幸运地得到完全缓解，纵隔原发肿瘤比较大，现在仍然还有一些活性，不过其他波及的地方已经基本消失，医生给我更换了一种药物，继续治疗。6个月的治疗后，为了进一步提高治愈率降低复发可能，我又开始接受放疗。放疗的体验还是蛮好的，副作用不大，基本不影响生活。过程呢就是用一个事先定制好的模具固定身体在放疗机器上，然后加速器把高能射线打到指定的部位，对放疗敏感的肿瘤类型比正常组织面对高能射线时会更加脆弱，因此合适的剂量可以在最大程度上杀灭肿瘤且保护正常器官。</p><p>相比放化疗的副作用我更担心的是远期风险。即使疾病治愈，放化疗对身体的损伤会带来不少远期的风险，尤其是对年轻人来说，零件使用年限还很长。最重要的是问题是放化疗会显著增加第二肿瘤的发病率，对于我个人而言，由于化疗药物有一定的心脏毒性同时肿瘤离心脏很近，放疗不可避免的会损伤心脏，远期我这颗饱经风雨的心脏会不会受不了还是挺让人担心的。医生会建议治疗结束后后定期复查，越接近初期，原发疾病复发的风险越大，因此复查比较频繁，三五年后原发疾病复发的风险就很低了，但是治疗带来的长期风险仍然要重视。我再次换上肿瘤以及其他疾病的风险会高于普通人，但是如果定期检查能把疾病扼杀在萌芽之中，对生命的威胁也就不大了，一定要记得警钟长鸣。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://lzlz000.github.io/&quot;&gt;个人主页&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;本来我写博客的目的为了学习整理知识的，就不在这一年的故事上过多的纠结了，这篇一次性写完吧。还是科学理性为主，少写没用的。&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;2020年3月</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>过去的一年(2)</title>
    <link href="http://blog.lzlz.site/2020/10/31/last_year-2/"/>
    <id>http://blog.lzlz.site/2020/10/31/last_year-2/</id>
    <published>2020-10-30T16:02:44.000Z</published>
    <updated>2020-11-02T16:42:54.159Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://lzlz000.github.io/">个人主页</a></p><p>我本身是一个文字水平不太高的人，我就尽量少谈感觉，写一写更加理性客观和科学的内容。记录一下这一年的经历，以后如果有机会，我再回过头来看看，也有一定意义。如果有人愿意阅读，我也希望能至少做到一些科普，如果是病友或者家属，能给你们的治疗过程提供一些帮助那就非常有幸了。</p><p>我现在最重要的是必须马上挂号，那天是周五，周末没有专家号，我挂了周一的号。另外，这件事情必须要告诉我的父母了，我没有办法独自承担后续的压力了。但是我想尽量让他们晚点知道，至少这个周末，我不告诉他们就还是个快乐的周末，但是对于我来说已经是无比的恐惧和煎熬了。从周五晚上到周六晚上我似睡非睡的躺了一天，星期六晚上实在想上厕所才起床，我一天没吃饭了居然一点不饿。我实在无法承受这样的压力了，我甚至觉得我周一可能都无法独自前往医院，晚上我给我妈打了电话。</p><p>不得不说我是一个没有演技和情商的人，我想我没有女朋友和这个关系很大 :(。我想轻描淡写的告诉我妈，我的检查结果有点异常，周一我约了再去看看有空的话过来陪我一起，但是我当时的情绪和声音让我妈听出了情况并不妙。周日一早我的父母就来杭州了，很明显他们也没睡好。</p><p>星期一我们来到医院，胸外科医生给我开了一系列检查，增强CT、PET-CT…… 他特别给了我一个他们科室主任的联系方式，让我做完这些检查去找他，号挂不到就让我打电话找他加号，如果不行在某个时间到胸外科病区去找他，评估一下有没有手术的机会。一个素未谋面的医生居然给我如此特殊待遇，我已经没有词汇可以形容我们一家人当时的状态了。。</p><p>一系列检查就花费了7000多元，原来PET-CT医保是不报销的，在浙江做一次PET-CT价格是6500元。PET-CT是一种全面评估肿瘤在全身波及范围的检查手段。具体原理是，检查前会向我的身体里注射一种显像剂，一般用的是18F代葡萄糖，有高中化学、生物基础的人应该知道葡萄糖是生命活动能量的提供者。葡萄糖分子中含有羟基，显像剂用F元素的放射性同位素18F代替这个基团整合到葡萄糖分子上，即<code>-O-H</code>替换为<code> -F</code>。这样的分子它的部分性质类似葡萄糖，会被组织细胞当做葡萄糖吸收，然而他不能正常的被氧化放出能量，所以就在身体中聚集。恶性肿瘤是无限繁殖生长活跃的组织，他所消耗的能量很大，所以分子就会大量聚集在被肿瘤波及的地方。18F是放射性元素，半衰期大约100多分钟，衰变后会生成一个18O+一个正电子+一份伽马射线。正电子会和无处不在的负电子淫灭，被仪器检测到。衰变产生的氧原子回合无处不在的氢离子结合，变成一个正常的葡萄糖分子被人体代谢。而这些衰变产生的射线就是PET-CT会对人体产生放射性伤害而不能经常做的原因，这个辐射剂量还是比较大的，大约是国际上规定的正常人一年可接受的辐射剂量的上限的数倍。不过国际组织规定的无害计量都是非常保守的，相对于肿瘤本身而言，检查对身体的伤害可以忽略不计。</p><p>检查结果出来后我们去见了那位胸外科的主任，我对他第一印象不错，他不让我们多说话，一边阅读各项报告，同时问什么问题我就做对应回答，主任提取报告和交流得到的关键信息写在病历上。他认为现在情况不适合手术，要先化疗让病灶缩小才能有手术机会。但是病理学检查才是肿瘤确诊的金标准，所以现在的情况下需要通过穿刺的方式取得一小份肿瘤组织来确诊。同时他还给我开了一份基因检测，要1万多元，不在医院而是把血液和组织样本给北京的一家检测机构，医保不报销。后来冷静下来后回想，这份基因检测是不需要做的，是医生圈钱的行为，胸部肿瘤的基因检测主要是用于肺癌治疗的，当然对于其他部分肿瘤的治疗也有一定参考作用，但是有多种疑似的肿瘤类型完全不能从基因检测中获得帮助，我这种情况，是肺癌的可能性存在但并不大，即便是完全可以确诊后再做检测。每次想到这位主任，我总觉得有点不舒服，我觉得他破坏了医生在我心中高尚的形象，正规医生不会害命，谋财还是会的。当然可能是因为我之前没接触过医院，有很多医生都会这样，只是我见得少。</p><p>在没有确诊，医生的说法也很含糊，更多是安慰性质的。根据医生的说法，和我所查到的资料，我有可能患有的疾病有恶性畸胎瘤、胸腺瘤、恶性淋巴瘤等等。恶性肿瘤不是一种疾病他是一大类疾病的统称，不同原发器官甚至不同病理类型、不同基因突变对应疾病的治疗效果都会天差地别。 胸腺瘤多是良恶性交界的肿瘤，通常预后较好，恶性程度较高的类型发病率低，但是现在没有太多治疗手段；恶性畸胎瘤和其他生殖源性恶性肿瘤恶性程度高，预后不是太好；淋巴瘤本身也是一个大类疾病，可以原发纵隔的淋巴瘤也分很多种，治疗效果差别很大。我觉得我很像一个等待审判的罪犯，是有期徒刑？还是死缓？还是死刑立即执行？等待检查来取证，医生来审判。我除了等待没有任何事情可以做，跟罪犯不同的是，我并没有做错什么。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://lzlz000.github.io/&quot;&gt;个人主页&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;我本身是一个文字水平不太高的人，我就尽量少谈感觉，写一写更加理性客观和科学的内容。记录一下这一年的经历，以后如果有机会，我再回过头来看看，也有一定意义。如果有人愿意阅读</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>重新开始更新-说说过去的一年</title>
    <link href="http://blog.lzlz.site/2020/10/30/last_year-1/"/>
    <id>http://blog.lzlz.site/2020/10/30/last_year-1/</id>
    <published>2020-10-30T12:45:33.000Z</published>
    <updated>2020-11-08T17:20:23.989Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://lzlz000.github.io/">个人主页</a></p><p>上一次在这里写东西是2019年7月，那之后一段时间由于工作上和领导有矛盾，总体来说就是我想调整工作到离家近点的城市，领导不让我走，也不解决我的其他要求，我性格又比较急躁，和领导之间发生了一些不愉快的事情。我打算如果领导不帮我调整，我就过完年辞职回浙江重新找工作。那段时间心情不好，也无心再学习技术或者写点其他的。好在2019年底换了领导，我也成功离开了武汉回到浙江。后来众所周知的疫情爆发了，我很庆幸自己提前离开风暴中心，免于一难，怎能想到故事才刚刚开始。</p><p>由于疫情关系，2020年的春节假期变得格外的长，直到二月下旬我才接到公司让我回去上班的通知（我已经调到了杭州分公司工作），回到杭州后，虽然我不是高危地区过来的不用隔离，但是公司为了保险起见让外地归来的员工在家待一周再去上班。由于之前那段时间我一直咳嗽，持续了一个多月了，吃药也不怎么管用。趁有空余时间，国内疫情也有所缓解，我就准备去医院看看咳嗽的问题。其实我不觉得咳嗽是个大问题，我还跟我妈说一点小病去大医院真是杀鸡用牛刀了。</p><p>医生给我开了CT。做完检查有一个回执单，扫描上面的二维码就可以看到检查结果，大约中午12点多钟，我的手机上看到了CT结果，大致内容是这样的：</p><blockquote><p> 前中纵隔占位，与胸膜、左肺上叶、心包分界不清，恶性肿瘤考虑，纵隔多发淋巴结肿大，左肺上叶实性结节，转移待排。心包积液，左侧胸腔积液……</p></blockquote><p>我难以形容当时的心情，我的第一反应是医院是不是搞错了，我一直挺健康的，从来没住过院，不算体检抽血上一次去医院打针是哪年我都记不得了。理智告诉我这种可能性基本不存在，要冷静下来，但是我的双腿已经开始发软，我感觉天旋地转不知道如何是好。我没去找医生，我想回家静静，可是当时的状态我感觉我的双腿不足以支撑我走到地铁站，我只能打车回家了。</p><p>我自认为还是有一定科学常识的人，而且我的长辈也有人得癌症去世，我对这类疾病有一定了解。肿瘤边界不清、淋巴结肿大这是恶性肿瘤标志性的特征，不论肺上的结节是不是转移，这个问题已经非常严重。肿瘤比较大，有胸腔积液和淋巴结肿大，最好最好也是局部晚期了，对于大多数恶性肿瘤来说，治愈率已经很低，如果发现远端转移那基本上只能延长生命。</p><p>回到家，我开始反复查看那个CT报告，现在医院的信息化程度确实不错，不仅有报告，还有完整的CT图像。我搜到医学院的影像学课程，找到胸部CT影像的视频，对着视频的内容对比手机上我自己的CT图像，越看越觉得恐怖。我钻进被子里好像被子能帮我抵御恐惧，我把被子裹得很紧，不知道过了多久我睡着了。醒来我全身都是汗，我不知道为什么会这样，这是肿瘤的症状还是受到了惊吓。不过现在我的理智恢复了一些，不管前方的路有没有尽头，我都必须面对了。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://lzlz000.github.io/&quot;&gt;个人主页&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;上一次在这里写东西是2019年7月，那之后一段时间由于工作上和领导有矛盾，总体来说就是我想调整工作到离家近点的城市，领导不让我走，也不解决我的其他要求，我性格又比较急躁</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>electron-vue多窗口</title>
    <link href="http://blog.lzlz.site/2019/07/16/electron-vue%E5%A4%9A%E7%AA%97%E5%8F%A3/"/>
    <id>http://blog.lzlz.site/2019/07/16/electron-vue%E5%A4%9A%E7%AA%97%E5%8F%A3/</id>
    <published>2019-07-16T03:05:45.000Z</published>
    <updated>2020-11-02T16:42:54.150Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://lzlz000.github.io/">个人主页</a></p><h4 id="打开子窗口"><a href="#打开子窗口" class="headerlink" title="打开子窗口"></a>打开子窗口</h4><p>electron使用 vue-cli 模板 simulatedgreg/electron-vue 的开发过程其实和普通vue应用区别不大，普通vue组件可以直接迁移进来，还可以使用node丰富的api。由于我们的应用需要使用多个窗口，vue单页面应用只有一个页面入口，这是我目前的解决方案：</p><p>首先electron的窗口间通讯需要使用ipc，在主进程中使用ipcMain:</p><pre><code class="hljs js"><span class="hljs-keyword">const</span> ipcMain = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;electron&#x27;</span>).ipcMain</code></pre><p>在渲染进程，即组件中使用ipcRenderer</p><pre><code class="hljs js"><span class="hljs-keyword">const</span> ipc = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;electron&#x27;</span>).ipcRendereripc.(event, args);<span class="hljs-comment">// 模板已经把它封装到vue的参数中了,也可以这样使用</span><span class="hljs-built_in">this</span>.$electron.ipcRenderer.send(event, args);</code></pre><p>在页面的入口组件上mounted钩子函数中加上,意味着接收主进程传来的router事件并指定路由参数</p><pre><code class="hljs js"><span class="hljs-built_in">this</span>.$electron.ipcRenderer.on(<span class="hljs-string">&#x27;router&#x27;</span>,<span class="hljs-function">(<span class="hljs-params">event,params</span>)=&gt;</span>&#123;    <span class="hljs-built_in">this</span>.$router.push(params)&#125;)</code></pre><p>在主进程脚本中接收事件并创建新窗口</p><pre><code class="hljs js">ipcMain.on(<span class="hljs-string">&#x27;new-window&#x27;</span>,<span class="hljs-function">(<span class="hljs-params">event,router</span>)=&gt;</span>&#123;   subWindow = <span class="hljs-keyword">new</span> BrowserWindow(&#123;        show: <span class="hljs-literal">false</span>,  <span class="hljs-comment">// 设置自动显示为false以使用ready-to-show事件回调</span>        parent: mainWindow <span class="hljs-comment">// 如果需要设置父窗口</span>    &#125;)    subWindow.on(<span class="hljs-string">&#x27;ready-to-show&#x27;</span>,<span class="hljs-function">()=&gt;</span>&#123;        subWindow.show();        subWindow.send(<span class="hljs-string">&#x27;router&#x27;</span>,router);     &#125;)&#125;)</code></pre><p>在主窗口发送事件</p><pre><code class="hljs js"><span class="hljs-built_in">this</span>.$electron.ipcRenderer.send(<span class="hljs-string">&#x27;new-window&#x27;</span>,&#123;    name:<span class="hljs-string">&#x27;entry&#x27;</span>, <span class="hljs-comment">// vue-router传递参数时候不能使用path作为路径</span>    params: &#123; <span class="hljs-attr">type</span>: channelType.key &#125; <span class="hljs-comment">//传递参数</span>&#125;);</code></pre><h4 id="窗口间数据交换"><a href="#窗口间数据交换" class="headerlink" title="窗口间数据交换"></a>窗口间数据交换</h4><p>还是进程间通讯问题，根据需求定义好几个事件，首先是子窗口准备好接收信息的事件，</p><p>在子窗口的组件即你路由到的那个指定组件的钩子函数mounted上加上以下代码告诉主进程，子窗口已经初始化完成，注意这不是electron窗口初始化完成而是指定的vue页面初始化完成</p><pre><code class="hljs js"><span class="hljs-built_in">this</span>.$electron.ipcRenderer.send(<span class="hljs-string">&#x27;sub-ready&#x27;</span>); <span class="hljs-built_in">this</span>.$electron.ipcRenderer.on(<span class="hljs-string">&#x27;data-to-sub&#x27;</span>,<span class="hljs-function">(<span class="hljs-params">event,data</span>)=&gt;</span>&#123;    <span class="hljs-comment">// 接收到数据</span>&#125;)</code></pre><p>此时主进程通知主窗口可以向子窗口通讯了。</p><pre><code class="hljs autoit">mainWindow.<span class="hljs-built_in">send</span>(<span class="hljs-string">&#x27;sub-ready&#x27;</span>)</code></pre><pre><code class="hljs js"><span class="hljs-comment">// 主窗口在合适位置监听：</span><span class="hljs-built_in">this</span>.$electron.ipcRenderer.on(<span class="hljs-string">&#x27;sub-ready&#x27;</span>,<span class="hljs-function">(<span class="hljs-params">event,params</span>)=&gt;</span>&#123;    <span class="hljs-comment">// 这时候如果需要可以提示用户，或者变量标识可以发送消息了</span>&#125;)<span class="hljs-comment">// 发送消息的函数</span><span class="hljs-function"><span class="hljs-title">sendData</span>(<span class="hljs-params">data</span>)</span>&#123;    <span class="hljs-built_in">this</span>.$electron.ipcRenderer.send(<span class="hljs-string">&#x27;data-to-sub&#x27;</span>,data)&#125;</code></pre><h4 id="整体流程"><a href="#整体流程" class="headerlink" title="整体流程"></a>整体流程</h4><ol><li>主窗口-&gt;主进程: 打开子窗口 </li><li>子窗口-&gt;主进程:初始化完成</li><li>主进程-&gt;子窗口:路由到指定页面</li><li>子窗口-&gt;主进程:页面加载完成</li><li>主进程-&gt;主窗口:子窗口已经可以使用了</li><li>窗口间可以互相通信</li></ol><p><img src="/images/1563257647260.png" alt="时序图"></p><p>以上例子是在一个主窗口和一个子窗口的情况下进行的，如果存在多个窗口或者复杂的路由，可能需要把代码抽象封装的更合理。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://lzlz000.github.io/&quot;&gt;个人主页&lt;/a&gt;&lt;/p&gt;
&lt;h4 id=&quot;打开子窗口&quot;&gt;&lt;a href=&quot;#打开子窗口&quot; class=&quot;headerlink&quot; title=&quot;打开子窗口&quot;&gt;&lt;/a&gt;打开子窗口&lt;/h4&gt;&lt;p&gt;elect</summary>
      
    
    
    
    
    <category term="前端" scheme="http://blog.lzlz.site/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="electron" scheme="http://blog.lzlz.site/tags/electron/"/>
    
  </entry>
  
  <entry>
    <title>electron+vue的实践</title>
    <link href="http://blog.lzlz.site/2019/07/09/electron-vue%E7%9A%84%E5%AE%9E%E8%B7%B5/"/>
    <id>http://blog.lzlz.site/2019/07/09/electron-vue%E7%9A%84%E5%AE%9E%E8%B7%B5/</id>
    <published>2019-07-09T09:59:26.000Z</published>
    <updated>2020-11-02T16:42:54.151Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://lzlz000.github.io/">个人主页</a></p><p>吐槽一下，我一个后端程序猿怎么天天在写前端呢😔？</p><p>我们项目要用到一个客户端程序，从我们本身的技术栈出发，最合适的就是electron+vue来实现了。网上有各种文章写到这些，我尝试了一下，记录一下踩坑的过程。</p><p>首先需要npm 和 vue-cli 这个就不再赘述了，</p><h4 id="初始化-开发-打包"><a href="#初始化-开发-打包" class="headerlink" title="初始化-开发-打包"></a>初始化-开发-打包</h4><p>百度上搜索关键词”electron vue” 找到的很多文章会让人误入歧途，比如这个：</p><p><a href="https://www.cnblogs.com/jiangxifanzhouyudu/p/9517651.html">https://www.cnblogs.com/jiangxifanzhouyudu/p/9517651.html</a>， 搜到的第一个就是它。使用 vue-cli 常规webpack打包</p><pre><code class="hljs csharp">vue <span class="hljs-keyword">init</span> webpack xxx</code></pre><p>初始化普通vue单页面项目的方式都是不对的，electron中运行和服务器上运行的web应用有很多区别，对于以后的开发和调试都非常不方便。这才是正确方式：</p><pre><code class="hljs csharp">vue <span class="hljs-keyword">init</span> simulatedgreg/electron-vue ele-vue</code></pre><p>这个模板帮助定义好了开发、调试、打包成多平台客户端的各方面配置。值得注意的是，electron和打包工具都非常大，npm的墙内速度真的会让你等到天荒地老，然后网络异常重来一遍。 如果你可以翻墙，就完美了，如果不幸可以在package.json的 build属性下新增以下内容使用淘宝镜像</p><pre><code class="hljs json">&quot;build&quot;: &#123;    &quot;electronDownload&quot;: &#123;      &quot;mirror&quot;: &quot;https://npm.taobao.org/mirrors/electron/&quot;    &#125;,    ...&#125;</code></pre><p>仍然有一些其他依赖资源不，例如winCodeSign，参考文章  <a href="https://www.cnblogs.com/chenweixuan/p/7693718.html">https://www.cnblogs.com/chenweixuan/p/7693718.html</a></p><p>但经过我在不同电脑上多次配置，还是或多或少存在问题，仅在本地开发时，淘宝镜像安装一切正常，electron-builder打包最好的解决方案仍然删除node_modules然后翻墙使用npm install 简单方便没有任何奇怪的问题发生。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://lzlz000.github.io/&quot;&gt;个人主页&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;吐槽一下，我一个后端程序猿怎么天天在写前端呢😔？&lt;/p&gt;
&lt;p&gt;我们项目要用到一个客户端程序，从我们本身的技术栈出发，最合适的就是electron+vue来实现了。网</summary>
      
    
    
    
    
    <category term="前端" scheme="http://blog.lzlz.site/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="electron" scheme="http://blog.lzlz.site/tags/electron/"/>
    
  </entry>
  
  <entry>
    <title>基于element-ui的页面内面包屑组件</title>
    <link href="http://blog.lzlz.site/2019/07/02/%E5%9F%BA%E4%BA%8Eelement-ui%E7%9A%84%E9%A1%B5%E9%9D%A2%E5%86%85%E9%9D%A2%E5%8C%85%E5%B1%91%E7%BB%84%E4%BB%B6/"/>
    <id>http://blog.lzlz.site/2019/07/02/%E5%9F%BA%E4%BA%8Eelement-ui%E7%9A%84%E9%A1%B5%E9%9D%A2%E5%86%85%E9%9D%A2%E5%8C%85%E5%B1%91%E7%BB%84%E4%BB%B6/</id>
    <published>2019-07-02T09:54:20.000Z</published>
    <updated>2020-11-02T16:42:54.173Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://lzlz000.github.io/">lzlz000的个人主页</a></p><p>elment-ui提供了面包屑组件 <strong>el-breadcrumb</strong> 然而他要配合url跳转路由使用，在项目中需要用到页面内的面包屑，因此我写了一个组件 <strong>inner-breadcrumb</strong>(源码在文章底部)</p><p>inner-breadcrumb 包装了 el-breadcrumb 显示效果基本相同，不同的是，不再跳转页面，而是提供一个v-model控制当前的path值，并且提供了动态路径显示的功能（样式只是因为我们的需求如此，这个可以很容易更改）<br>原版样式<br><img src="/images/5d037c361553b.png"><br>本组件样式<br><img src="/images/5d037bd441e48.png"></p><h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><table><thead><tr><th>名称</th><th>说明</th><th>类型</th><th>默认值</th></tr></thead><tbody><tr><td>v-model</td><td>绑定路径值</td><td>string/number</td><td>必填</td></tr><tr><td>path</td><td>面包屑全路径参数，详见下文</td><td>object</td><td>必填</td></tr><tr><td>showInRoot</td><td>是否在根页面显示该组件</td><td>boolean</td><td>false</td></tr><tr><td>showBack</td><td>是否在右侧显示“返回上一级”</td><td>boolean</td><td>false</td></tr><tr><td>labelArgs</td><td>面包屑标签动态参数,详见下文</td><td>object</td><td>-</td></tr></tbody></table><h3 id="例"><a href="#例" class="headerlink" title="例"></a>例</h3><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">inner-breadcrumb</span></span><span class="hljs-tag">  <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;innerPath&quot;</span></span><span class="hljs-tag">  <span class="hljs-attr">:path</span>=<span class="hljs-string">&quot;&#123;</span></span><span class="hljs-tag"><span class="hljs-string">    label: &#x27;一级页面&#x27;,</span></span><span class="hljs-tag"><span class="hljs-string">    key: &#x27;1&#x27;,</span></span><span class="hljs-tag"><span class="hljs-string">    children: [</span></span><span class="hljs-tag"><span class="hljs-string">      &#123;</span></span><span class="hljs-tag"><span class="hljs-string">        key: &#x27;2A&#x27;,</span></span><span class="hljs-tag"><span class="hljs-string">        label: &#x27;二级页面A&#x27;</span></span><span class="hljs-tag"><span class="hljs-string">      &#125;,</span></span><span class="hljs-tag"><span class="hljs-string">      &#123;</span></span><span class="hljs-tag"><span class="hljs-string">        key: &#x27;2B&#x27;,</span></span><span class="hljs-tag"><span class="hljs-string">        label: &#x27;二级页面B&#x27;,</span></span><span class="hljs-tag"><span class="hljs-string">        children: [</span></span><span class="hljs-tag"><span class="hljs-string">          &#123;</span></span><span class="hljs-tag"><span class="hljs-string">            key: &#x27;3&#x27;,</span></span><span class="hljs-tag"><span class="hljs-string">            label: &#x27;三级页面&#x27;</span></span><span class="hljs-tag"><span class="hljs-string">          &#125;</span></span><span class="hljs-tag"><span class="hljs-string">        ]</span></span><span class="hljs-tag"><span class="hljs-string">      &#125;</span></span><span class="hljs-tag"><span class="hljs-string">    ]</span></span><span class="hljs-tag"><span class="hljs-string">&#125;&quot;</span>/&gt;</span></code></pre><p>当 v-model绑定值为”3”时，页面为：<br><img src="/images/5d037bd441e48.png"></p><ul><li>控制页面的方式</li></ul><pre><code class="hljs applescript">&lt;<span class="hljs-keyword">div</span> v-<span class="hljs-keyword">if</span>=<span class="hljs-string">&quot;innerPath==&#x27;1&#x27;&quot;</span>&gt;...&lt;/<span class="hljs-keyword">div</span>&gt;&lt;<span class="hljs-keyword">div</span> v-<span class="hljs-keyword">else</span>-<span class="hljs-keyword">if</span>=<span class="hljs-string">&quot;innerPath==&#x27;2A&#x27;&quot;</span>&gt;...&lt;/<span class="hljs-keyword">div</span>&gt;&lt;<span class="hljs-keyword">div</span> v-<span class="hljs-keyword">else</span>-<span class="hljs-keyword">if</span>=<span class="hljs-string">&quot;innerPath==&#x27;2B&#x27;&quot;</span>&gt;...&lt;/<span class="hljs-keyword">div</span>&gt;&lt;<span class="hljs-keyword">div</span> v-<span class="hljs-keyword">else</span>-<span class="hljs-keyword">if</span>=<span class="hljs-string">&quot;innerPath==&#x27;3&#x27;&quot;</span>&gt;...&lt;/<span class="hljs-keyword">div</span>&gt;</code></pre><p>以此类推，页面会按照树形结构自动生成当前位置的面包屑，你可以无限添加。</p><p>值得注意的是，当回到主页面时候，面包屑默认隐藏，因为绝大多数需求和常理都不需要在主页面显示孤零零的面包屑。当然可以通过添加参数 <strong>showInRoot</strong> 来显示它</p><h3 id="属性path的设置"><a href="#属性path的设置" class="headerlink" title="属性path的设置"></a>属性path的设置</h3><table><thead><tr><th>名称</th><th>说明</th><th>类型</th><th>默认值</th></tr></thead><tbody><tr><td>label</td><td>页面标签显示的值</td><td>string/number</td><td>必填</td></tr><tr><td>key</td><td>标签的key</td><td>string/number</td><td>必填</td></tr><tr><td>children</td><td>下一级路径的集合</td><td>array,其中每个元素都是一个节点，多叉树结构</td><td>-</td></tr><tr><td>disable</td><td>如果当前路径不允许被点击则加上</td><td>boolean</td><td>false</td></tr></tbody></table><ul><li>注意，开启“返回上一级”按钮，若上一级目录是disable，则会跳过，若所有上级目录均为disable，则无效，控制台会打印警告信息</li></ul><pre><code class="hljs json">&#123;label: &quot;一级页面&quot;, key: &quot;1&quot;,children: [  &#123;key: &quot;2A&quot;,label: &quot;二级页面A&quot;,disable: true  &#125;,  &#123;key: &quot;2B&quot;,label: &quot;二级页面B&quot;,children: [  &#123;key: &quot;3&quot;,label: &quot;三级页面&quot;  &#125;]  &#125;]&#125;</code></pre><h3 id="动态参数"><a href="#动态参数" class="headerlink" title="动态参数"></a>动态参数</h3><p>动态参数通过属性 <strong>labelArgs</strong> 设置，适用于需要路径动态标签的情况</p><h4 id="例-1"><a href="#例-1" class="headerlink" title="例"></a>例</h4><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">inner-breadcrumb</span></span><span class="hljs-tag">  <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;pathKey&quot;</span></span><span class="hljs-tag">  <span class="hljs-attr">:label-args</span> =<span class="hljs-string">&quot;&#123;code: active.code&#125;&quot;</span></span><span class="hljs-tag">  <span class="hljs-attr">:path</span>=<span class="hljs-string">&quot;&#123;</span></span><span class="hljs-tag"><span class="hljs-string">    label: &#x27;排课管理&#x27;,</span></span><span class="hljs-tag"><span class="hljs-string">    key:&#x27;main&#x27;,</span></span><span class="hljs-tag"><span class="hljs-string">    children:[&#123;</span></span><span class="hljs-tag"><span class="hljs-string">      label: &#x27;教学班排课(&#123;code&#125;)&#x27;,</span></span><span class="hljs-tag"><span class="hljs-string">      key:&#x27;arrange&#x27;</span></span><span class="hljs-tag"><span class="hljs-string">    &#125;,]</span></span><span class="hljs-tag"><span class="hljs-string">  &#125;&quot;</span>/&gt;</span></code></pre><p>当切换到对应路径<strong>arrange</strong>时候，会显示：<br><img src="/images/5d037be97b8c2.png"></p><p>源码如下:</p><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>  <span class="hljs-comment">&lt;!-- 页面内部使用的面包屑组件（URL不变,不适用router跳转） --&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;inner-breadcrumb&quot;</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;showInRoot || value!=root&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;height:24px;padding:0 3px 10px;&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">el-breadcrumb</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;breadcrumb&quot;</span> <span class="hljs-attr">separator</span>=<span class="hljs-string">&quot;/&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;float:left;&quot;</span>&gt;</span>      <span class="hljs-tag">&lt;<span class="hljs-name">el-breadcrumb-item</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(node, index) in pathArr&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;index&quot;</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;node.disable &amp;&amp; index&lt;pathArr.length-1&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;disable&quot;</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;&#123;&#x27;last&#x27;:index==pathArr.length-1&#125;&quot;</span>&gt;</span>&#123;&#123;parse(node.label)&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">v-else</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;&#123;&#x27;last&#x27;:index==pathArr.length-1&#125;&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;change(node.key,node.disable)&quot;</span>&gt;</span>&#123;&#123;parse(node.label)&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>      <span class="hljs-tag">&lt;/<span class="hljs-name">el-breadcrumb-item</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">el-breadcrumb</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;showBack&amp;&amp;pathArr.length&gt;1&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;float:right;padding:0;&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;back&quot;</span>&gt;</span>返回上一级<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span>/** * 页面内部使用的面包屑组件（URL不变,不适用router跳转） */<span class="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><span class="javascript">  name: <span class="hljs-string">&quot;InnerBreadcrumb&quot;</span>,</span>  props: &#123;    value: &#123;<span class="javascript">      type: <span class="hljs-built_in">String</span>,</span>    &#125;,    path: &#123;<span class="javascript">      type: <span class="hljs-built_in">Object</span>,</span><span class="javascript">      required: <span class="hljs-literal">true</span>,</span><span class="javascript">      <span class="hljs-comment">// 形如：</span></span><span class="javascript">      <span class="hljs-keyword">default</span>: &#123;</span><span class="javascript">        label: <span class="hljs-string">&quot;一级页面&quot;</span>,</span><span class="javascript">        key: <span class="hljs-string">&quot;1&quot;</span>,</span>        children: [          &#123;<span class="javascript">            key: <span class="hljs-string">&quot;2A&quot;</span>,</span><span class="javascript">            label: <span class="hljs-string">&quot;二级页面A&quot;</span></span>          &#125;,          &#123;<span class="javascript">            key: <span class="hljs-string">&quot;2B&quot;</span>,</span><span class="javascript">            label: <span class="hljs-string">&quot;二级页面B&quot;</span>,</span><span class="javascript">            disable: <span class="hljs-literal">true</span>,</span>            children: [              &#123;<span class="javascript">                key: <span class="hljs-string">&quot;3&quot;</span>,</span><span class="javascript">                label: <span class="hljs-string">&quot;三级页面&quot;</span></span>              &#125;            ]          &#125;        ]      &#125;    &#125;,<span class="javascript">    showBack:&#123; <span class="hljs-comment">// 是否显示返回上一级</span></span><span class="javascript">      type: <span class="hljs-built_in">Boolean</span>,</span><span class="javascript">      <span class="hljs-keyword">default</span>: <span class="hljs-literal">false</span></span>    &#125;,<span class="javascript">    showInRoot: &#123; <span class="hljs-comment">// 是否在根目录显示</span></span><span class="javascript">      type: <span class="hljs-built_in">Boolean</span>,</span><span class="javascript">      <span class="hljs-keyword">default</span>: <span class="hljs-literal">false</span></span>    &#125;,<span class="javascript">    labelArgs:&#123; <span class="hljs-comment">// 用于回显的参数 例如在 label 中使用 &#x27;设置:&#123;info&#125;&#x27;,在 labelArgs传入&#123;info:&#x27;用户信息&#x27;&#125; 即可</span></span><span class="javascript">      type: <span class="hljs-built_in">Object</span>,</span><span class="javascript">      <span class="hljs-keyword">default</span>: &#123;&#125;</span>    &#125;  &#125;,<span class="javascript">  <span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span> &#123;</span><span class="javascript">    <span class="hljs-keyword">return</span> &#123;</span><span class="javascript">      pathMap: <span class="hljs-literal">null</span>,</span><span class="javascript">      root: <span class="hljs-literal">null</span>,</span>      pathArr: []    &#125;;  &#125;,  watch: &#123;<span class="javascript">    <span class="hljs-function"><span class="hljs-title">value</span>(<span class="hljs-params">val</span>)</span> &#123;</span><span class="javascript">      <span class="hljs-built_in">this</span>.buildPath(val);</span>    &#125;  &#125;,  methods: &#123;<span class="javascript">    <span class="hljs-function"><span class="hljs-title">init</span>(<span class="hljs-params"></span>)</span> &#123;</span><span class="javascript">      <span class="hljs-keyword">let</span> path = <span class="hljs-built_in">this</span>.path;</span><span class="javascript">      <span class="hljs-built_in">this</span>.root = path.key;</span><span class="javascript">      <span class="hljs-keyword">let</span> pathMap = &#123;&#125;;</span><span class="javascript">      <span class="hljs-comment">// 遍历path树,给每个节点加上父节点的key，parentKey空则是根节点</span></span><span class="javascript">      <span class="hljs-keyword">let</span> traverse = <span class="hljs-function">(<span class="hljs-params">node, parentKey</span>) =&gt;</span> &#123;</span>        node.parentKey = parentKey;        pathMap[node.key] = node;        if (node.children &amp;&amp; node.children.length) &#123;<span class="javascript">          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; node.children.length; i++) &#123;</span><span class="javascript">            <span class="hljs-keyword">const</span> child = node.children[i];</span>            traverse(child, node.key);          &#125;        &#125;      &#125;;      traverse(path);<span class="javascript">      <span class="hljs-built_in">this</span>.pathMap = pathMap;</span>    &#125;,<span class="javascript">    <span class="hljs-function"><span class="hljs-title">buildPath</span>(<span class="hljs-params">key</span>)</span> &#123;</span>      if(!key)<span class="javascript">        <span class="hljs-keyword">return</span>;</span><span class="javascript">      <span class="hljs-comment">// 建立路径数组</span></span><span class="javascript">      <span class="hljs-keyword">let</span> node = <span class="hljs-built_in">this</span>.pathMap[key];</span>      if (!node) &#123;<span class="javascript">        <span class="hljs-comment">// console.warn(&quot;InnerBreadcrumb 找不到key:&quot; + key);</span></span><span class="javascript">        <span class="hljs-keyword">return</span>;</span>      &#125;<span class="javascript">      <span class="hljs-keyword">let</span> arr = [];</span><span class="javascript">      <span class="hljs-keyword">while</span> (node) &#123;</span>        arr.push(node);<span class="javascript">        node = <span class="hljs-built_in">this</span>.pathMap[node.parentKey];</span>      &#125;      arr.reverse();<span class="javascript">      <span class="hljs-built_in">this</span>.pathArr = arr;</span>    &#125;,<span class="javascript">    <span class="hljs-function"><span class="hljs-title">parse</span>(<span class="hljs-params">label</span>)</span>&#123;</span><span class="javascript">      <span class="hljs-keyword">const</span> reg = <span class="hljs-regexp">/\&#123;[^\&#125;]+\&#125;/g</span>;</span><span class="javascript">      <span class="hljs-keyword">let</span> labelCopy = label; <span class="hljs-comment">// 复制一份</span></span><span class="javascript">      <span class="hljs-keyword">let</span> match;</span>      /* match的值<span class="javascript">        <span class="hljs-number">0</span>: <span class="hljs-string">&quot;&#123;abc&#125;&quot;</span></span><span class="javascript">        groups: <span class="hljs-literal">undefined</span></span>        index: 3<span class="javascript">        input: <span class="hljs-string">&quot;123&#123;abc&#125;,&#123;b&#125;&quot;</span></span>      */<span class="javascript">      <span class="hljs-function"><span class="hljs-title">while</span>(<span class="hljs-params">(match = reg.exec(label))!=<span class="hljs-literal">null</span></span>)</span>&#123;</span><span class="javascript">        <span class="hljs-keyword">let</span> key = match[<span class="hljs-number">0</span>].substr(<span class="hljs-number">1</span>,match[<span class="hljs-number">0</span>].length-<span class="hljs-number">2</span>);</span><span class="javascript">        <span class="hljs-keyword">let</span> value = <span class="hljs-built_in">this</span>.labelArgs[key];</span>        if (value)&#123;<span class="javascript">          <span class="hljs-comment">// console.warn(&#x27;InnerBreadcrumb 找不到参数:&#x27;, key);</span></span>          labelCopy = labelCopy.replace(match[0],value);        &#125;      &#125;<span class="javascript">      <span class="hljs-keyword">return</span> labelCopy;</span>    &#125;,<span class="javascript">    <span class="hljs-function"><span class="hljs-title">change</span>(<span class="hljs-params">key, disable</span>)</span> &#123;</span><span class="javascript">      <span class="hljs-keyword">if</span> (disable) <span class="hljs-keyword">return</span>;</span><span class="javascript">      <span class="hljs-comment">// console.log(key);</span></span><span class="javascript">      <span class="hljs-built_in">this</span>.$emit(<span class="hljs-string">&quot;input&quot;</span>, key);</span>    &#125;,<span class="javascript">    <span class="hljs-function"><span class="hljs-title">back</span>(<span class="hljs-params"></span>)</span>&#123;</span><span class="javascript">      <span class="hljs-function"><span class="hljs-title">if</span>(<span class="hljs-params"><span class="hljs-built_in">this</span>.pathArr &amp;&amp; <span class="hljs-built_in">this</span>.pathArr.length&gt;<span class="hljs-number">1</span></span>)</span>&#123;</span><span class="javascript">        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-built_in">this</span>.pathArr.length-<span class="hljs-number">2</span>; i &gt;=<span class="hljs-number">0</span>; i--) &#123;</span><span class="javascript">          <span class="hljs-keyword">const</span> node = <span class="hljs-built_in">this</span>.pathArr[i];</span>          if (!node.disable)&#123;<span class="javascript">            <span class="hljs-built_in">this</span>.change(node.key);</span><span class="javascript">            <span class="hljs-keyword">return</span>;</span>          &#125;        &#125;      &#125;<span class="javascript">      <span class="hljs-built_in">console</span>.warn(<span class="hljs-string">&#x27;InnerBreadcrumb 没有非disalbe的上级路径&#x27;</span>);</span>    &#125;  &#125;,<span class="javascript">  <span class="hljs-function"><span class="hljs-title">created</span>(<span class="hljs-params"></span>)</span> &#123;&#125;,</span><span class="javascript">  <span class="hljs-function"><span class="hljs-title">mounted</span>(<span class="hljs-params"></span>)</span> &#123;</span><span class="javascript">    <span class="hljs-built_in">this</span>.init();</span><span class="javascript">    <span class="hljs-built_in">this</span>.buildPath(<span class="hljs-built_in">this</span>.value);</span>  &#125;&#125;;<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;scss&quot;</span>&gt;</span><span class="css"><span class="hljs-selector-class">.inner-breadcrumb</span> &#123;</span><span class="css">  <span class="hljs-selector-class">.breadcrumb</span>&#123;</span>    span &#123;      font-weight: normal;<span class="css">      <span class="hljs-selector-tag">color</span>: <span class="hljs-selector-id">#aaa</span>;</span>    &#125;    a &#123;      font-weight: normal;<span class="css">      <span class="hljs-selector-tag">color</span>: <span class="hljs-selector-id">#aaa</span>;</span>    &#125;<span class="css">    <span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:hover</span>&#123;</span><span class="css">      <span class="hljs-selector-tag">color</span>: <span class="hljs-selector-id">#409EFF</span>;</span>    &#125;<span class="css">    <span class="hljs-selector-class">.last</span>&#123;</span>      font-weight: bold!important;      cursor: default!important;    &#125;<span class="css">    <span class="hljs-selector-class">.disable</span>&#123;</span>      cursor: default!important;    &#125;  &#125;  &#125;<span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://lzlz000.github.io/&quot;&gt;lzlz000的个人主页&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;elment-ui提供了面包屑组件 &lt;strong&gt;el-breadcrumb&lt;/strong&gt; 然而他要配合url跳转路由使用，在项目中需要用到页面内</summary>
      
    
    
    
    
    <category term="前端" scheme="http://blog.lzlz.site/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>万年历是如何计算的，python实现</title>
    <link href="http://blog.lzlz.site/2019/07/01/%E4%B8%87%E5%B9%B4%E5%8E%86%E6%98%AF%E5%A6%82%E4%BD%95%E8%AE%A1%E7%AE%97%E7%9A%84/"/>
    <id>http://blog.lzlz.site/2019/07/01/%E4%B8%87%E5%B9%B4%E5%8E%86%E6%98%AF%E5%A6%82%E4%BD%95%E8%AE%A1%E7%AE%97%E7%9A%84/</id>
    <published>2019-07-01T06:17:43.000Z</published>
    <updated>2020-11-02T16:42:54.168Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://lzlz000.github.io/">lzlz000的个人主页</a></p><p>网上能搜到不少万年历的代码，但是这应该是最详细的万年历介绍，有对天文历法、农历转换原理的的详细介绍</p><p>一份万年历应该包含的内容有公历公元纪年、日期、星期；农历干支纪年、日期、二十四节气。本文主要写的是以一个给定的公历日期来查询星期，农历日期，至于节日，完全可以根据给定的公历农历日期、星期查表获得，比较简单不再描述, 例如这样</p><pre><code class="hljs python"><span class="hljs-comment"># 公历节日字典</span>&#123;    <span class="hljs-string">&#x27;1001&#x27;</span>: <span class="hljs-string">&#x27;国庆节&#x27;</span>,    <span class="hljs-string">&#x27;0501&#x27;</span>: <span class="hljs-string">&#x27;劳动节&#x27;</span>,&#125;<span class="hljs-comment"># 农历节日字典 需要注意的是除夕的判断，由于农历12月有可能有29或者30天，需要判断处理</span>&#123;    <span class="hljs-string">&#x27;0101&#x27;</span>: <span class="hljs-string">&#x27;春节&#x27;</span>,    <span class="hljs-string">&#x27;0815&#x27;</span>: <span class="hljs-string">&#x27;重阳节&#x27;</span>,&#125;<span class="hljs-comment"># 公历月份星期节日 520即 5月第2个星期日</span>&#123;    <span class="hljs-string">&#x27;520&#x27;</span> : <span class="hljs-string">&#x27;母亲节&#x27;</span>,    <span class="hljs-string">&#x27;1021&#x27;</span> : <span class="hljs-string">&#x27;10月第2个星期1 不好意思今天没有节日&#x27;</span>&#125;</code></pre><p>至于宜忌，(・∀・(・∀・(・∀・*)，我觉得我写的是一篇科普向的文章，封建迷信就算了吧，据我所知，程序对这种内容八成是随机生成的，或者爬黄历网站的数据，然而还有人相信，权当自我安慰吧。</p><h3 id="公历"><a href="#公历" class="headerlink" title="公历"></a>公历</h3><p>公历是一种太阳历，即以地球绕日公转为基础制定的历法。以地球自转一周为一天，一年有365.2422天（回归年，历法基本以回归年为基准，回归年以太阳直射地球的纬度的回归周期计算，恒星年（以地球在公转轨道的位置回归周期计算）和回归年有小的差别，因为地球自转轴是在摆动的）。</p><h4 id="闰年"><a href="#闰年" class="headerlink" title="闰年"></a>闰年</h4><p>为了弥补自传和公转的插值，保证每一年的同一天太阳直射地球的纬度大致相同（否则会出不同年的同一天所在的季节一直在变化），就产生了闰年，其规则为每400年有97个闰年，四年一闰，百年不闰，四百年再闰。用代码来表达:</p><pre><code class="hljs python"><span class="hljs-comment"># 判断公元纪年是否为闰年</span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">is_leap_year</span>(<span class="hljs-params">year:<span class="hljs-built_in">int</span></span>):</span>    <span class="hljs-keyword">if</span> year % <span class="hljs-number">4</span> == <span class="hljs-number">0</span>:        <span class="hljs-keyword">if</span> year % <span class="hljs-number">100</span> == <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> year % <span class="hljs-number">400</span> == <span class="hljs-number">0</span>:                <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>        <span class="hljs-keyword">elif</span> year % <span class="hljs-number">100</span> != <span class="hljs-number">0</span>:            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>    <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span></code></pre><h4 id="星期"><a href="#星期" class="headerlink" title="星期"></a>星期</h4><p><strong>蔡勒（Zeller）公式</strong> 是一个计算星期的公式，是一个简化星期的计算的技巧，给出一个日期，就能用这个公式推算出是星期几。</p><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">zeller</span>(<span class="hljs-params">year: <span class="hljs-built_in">int</span>, month: <span class="hljs-built_in">int</span>, day: <span class="hljs-built_in">int</span></span>):</span>    <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">    蔡勒公式,计算指定年月日是星期几的算法</span><span class="hljs-string"></span><span class="hljs-string">    :param year:  年</span><span class="hljs-string">    :param month: 月</span><span class="hljs-string">    :param day:   日</span><span class="hljs-string">    :return: 0-星期日，1-星期一，2-星期二，3-星期三，4-星期四，5-星期五，6-星期六</span><span class="hljs-string">    &quot;&quot;&quot;</span>    <span class="hljs-comment"># 在蔡勒公式中，某年的1、2月要看作上一年的13、14月来计算，比如2019年1月1日要看作2018年的13月1日来计算</span>    <span class="hljs-keyword">if</span> month &lt; <span class="hljs-number">3</span>:        m = month + <span class="hljs-number">12</span>        year = year - <span class="hljs-number">1</span>    <span class="hljs-keyword">else</span>:        m = month    <span class="hljs-comment"># 公元前1年和公元元年(1年)相邻，没有0年</span>    <span class="hljs-keyword">if</span> year == <span class="hljs-number">0</span>:        year = <span class="hljs-number">-1</span>    y = year % <span class="hljs-number">100</span>  <span class="hljs-comment"># 取年的后两位</span>    <span class="hljs-comment"># 世纪 取已经经过的世纪，即20xx取20而不是21世纪</span>    c = (year - y) / <span class="hljs-number">100</span>    <span class="hljs-comment"># 注意，如果年份是公元前的年份且非整百数的话，c应该等于所在世纪的编号，如公元前253年，是公元前3世纪</span>    <span class="hljs-keyword">if</span> c &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> y != <span class="hljs-number">0</span>:        c -= <span class="hljs-number">1</span>    <span class="hljs-keyword">return</span> (y + <span class="hljs-built_in">int</span>(y / <span class="hljs-number">4</span>) + <span class="hljs-built_in">int</span>(c / <span class="hljs-number">4</span>) - <span class="hljs-number">2</span> * c + <span class="hljs-built_in">int</span>(<span class="hljs-number">26</span> * (m + <span class="hljs-number">1</span>) / <span class="hljs-number">10</span>) + day - <span class="hljs-number">1</span>) % <span class="hljs-number">7</span></code></pre><h3 id="农历"><a href="#农历" class="headerlink" title="农历"></a>农历</h3><p>农历是混合历，日期记录以月亮历为基础，月球绕地公转周期约29.53059日，因此农历有大小月之分，大月30天小月29天。</p><h4 id="农历日期"><a href="#农历日期" class="headerlink" title="农历日期"></a>农历日期</h4><p>农历实际上没有非常强的规律性，它的定义是依赖天文观测值推算的，因此通常存储当前前后一百多年的观测/推算值作为农历数据，因此，所谓万年历是假的，大多数只能查询1900-2049这段时间的农历日期。</p><p>个人认为，这其实就是中国传统天文历法的缺陷性，观测只是手段，甚至无法用规律性的公式来表达历法，只能查表，没有追求对天体规律的研究，而把天象当作凶吉之兆，真是非常可惜的。要知道，西方文明对于天体运动的精确观测和规律的研究对牛顿提出万有引力定律和力学定律产生了直接的影响（再说牛顿被苹果砸想出万有引力定律的拖出去枪毙五分钟），从此我们知道了天上的星星和地上的人遵循着同样的运行规则。我们的文明智慧是不差的，点错了科技树实在是可惜啊。</p><p>当前日期和初始日期的间隔来得到具体是农历年月日以及是否为闰月</p><pre><code class="hljs python"><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime<span class="hljs-comment"># from datetime import timedelta</span><span class="hljs-comment"># 1900-2049年的农历数据表,5个16进制数，共20bit</span><span class="hljs-comment"># - 前4位，在这一年是润年时才有意义，它代表这年润月的大小月，为1则润大月，为0则润小月。</span><span class="hljs-comment"># - 中间12位，即4bit，每位代表一个月，为1则为大月，为0则为小月。</span><span class="hljs-comment"># - 最后4位，即8，代表这一年的润月月份，为0则不润。首4位要与末4位搭配使用</span>lunar_info = [<span class="hljs-number">0x04bd8</span>, <span class="hljs-number">0x04ae0</span>, <span class="hljs-number">0x0a570</span>, <span class="hljs-number">0x054d5</span>, <span class="hljs-number">0x0d260</span>, <span class="hljs-number">0x0d950</span>, <span class="hljs-number">0x16554</span>, <span class="hljs-number">0x056a0</span>, <span class="hljs-number">0x09ad0</span>, <span class="hljs-number">0x055d2</span>,              <span class="hljs-number">0x04ae0</span>, <span class="hljs-number">0x0a5b6</span>, <span class="hljs-number">0x0a4d0</span>, <span class="hljs-number">0x0d250</span>, <span class="hljs-number">0x1d255</span>, <span class="hljs-number">0x0b540</span>, <span class="hljs-number">0x0d6a0</span>, <span class="hljs-number">0x0ada2</span>, <span class="hljs-number">0x095b0</span>, <span class="hljs-number">0x14977</span>,              <span class="hljs-number">0x04970</span>, <span class="hljs-number">0x0a4b0</span>, <span class="hljs-number">0x0b4b5</span>, <span class="hljs-number">0x06a50</span>, <span class="hljs-number">0x06d40</span>, <span class="hljs-number">0x1ab54</span>, <span class="hljs-number">0x02b60</span>, <span class="hljs-number">0x09570</span>, <span class="hljs-number">0x052f2</span>, <span class="hljs-number">0x04970</span>,              <span class="hljs-number">0x06566</span>, <span class="hljs-number">0x0d4a0</span>, <span class="hljs-number">0x0ea50</span>, <span class="hljs-number">0x06e95</span>, <span class="hljs-number">0x05ad0</span>, <span class="hljs-number">0x02b60</span>, <span class="hljs-number">0x186e3</span>, <span class="hljs-number">0x092e0</span>, <span class="hljs-number">0x1c8d7</span>, <span class="hljs-number">0x0c950</span>,              <span class="hljs-number">0x0d4a0</span>, <span class="hljs-number">0x1d8a6</span>, <span class="hljs-number">0x0b550</span>, <span class="hljs-number">0x056a0</span>, <span class="hljs-number">0x1a5b4</span>, <span class="hljs-number">0x025d0</span>, <span class="hljs-number">0x092d0</span>, <span class="hljs-number">0x0d2b2</span>, <span class="hljs-number">0x0a950</span>, <span class="hljs-number">0x0b557</span>,              <span class="hljs-number">0x06ca0</span>, <span class="hljs-number">0x0b550</span>, <span class="hljs-number">0x15355</span>, <span class="hljs-number">0x04da0</span>, <span class="hljs-number">0x0a5d0</span>, <span class="hljs-number">0x14573</span>, <span class="hljs-number">0x052d0</span>, <span class="hljs-number">0x0a9a8</span>, <span class="hljs-number">0x0e950</span>, <span class="hljs-number">0x06aa0</span>,              <span class="hljs-number">0x0aea6</span>, <span class="hljs-number">0x0ab50</span>, <span class="hljs-number">0x04b60</span>, <span class="hljs-number">0x0aae4</span>, <span class="hljs-number">0x0a570</span>, <span class="hljs-number">0x05260</span>, <span class="hljs-number">0x0f263</span>, <span class="hljs-number">0x0d950</span>, <span class="hljs-number">0x05b57</span>, <span class="hljs-number">0x056a0</span>,              <span class="hljs-number">0x096d0</span>, <span class="hljs-number">0x04dd5</span>, <span class="hljs-number">0x04ad0</span>, <span class="hljs-number">0x0a4d0</span>, <span class="hljs-number">0x0d4d4</span>, <span class="hljs-number">0x0d250</span>, <span class="hljs-number">0x0d558</span>, <span class="hljs-number">0x0b540</span>, <span class="hljs-number">0x0b5a0</span>, <span class="hljs-number">0x195a6</span>,              <span class="hljs-number">0x095b0</span>, <span class="hljs-number">0x049b0</span>, <span class="hljs-number">0x0a974</span>, <span class="hljs-number">0x0a4b0</span>, <span class="hljs-number">0x0b27a</span>, <span class="hljs-number">0x06a50</span>, <span class="hljs-number">0x06d40</span>, <span class="hljs-number">0x0af46</span>, <span class="hljs-number">0x0ab60</span>, <span class="hljs-number">0x09570</span>,              <span class="hljs-number">0x04af5</span>, <span class="hljs-number">0x04970</span>, <span class="hljs-number">0x064b0</span>, <span class="hljs-number">0x074a3</span>, <span class="hljs-number">0x0ea50</span>, <span class="hljs-number">0x06b58</span>, <span class="hljs-number">0x055c0</span>, <span class="hljs-number">0x0ab60</span>, <span class="hljs-number">0x096d5</span>, <span class="hljs-number">0x092e0</span>,              <span class="hljs-number">0x0c960</span>, <span class="hljs-number">0x0d954</span>, <span class="hljs-number">0x0d4a0</span>, <span class="hljs-number">0x0da50</span>, <span class="hljs-number">0x07552</span>, <span class="hljs-number">0x056a0</span>, <span class="hljs-number">0x0abb7</span>, <span class="hljs-number">0x025d0</span>, <span class="hljs-number">0x092d0</span>, <span class="hljs-number">0x0cab5</span>,              <span class="hljs-number">0x0a950</span>, <span class="hljs-number">0x0b4a0</span>, <span class="hljs-number">0x0baa4</span>, <span class="hljs-number">0x0ad50</span>, <span class="hljs-number">0x055d9</span>, <span class="hljs-number">0x04ba0</span>, <span class="hljs-number">0x0a5b0</span>, <span class="hljs-number">0x15176</span>, <span class="hljs-number">0x052b0</span>, <span class="hljs-number">0x0a930</span>,              <span class="hljs-number">0x07954</span>, <span class="hljs-number">0x06aa0</span>, <span class="hljs-number">0x0ad50</span>, <span class="hljs-number">0x05b52</span>, <span class="hljs-number">0x04b60</span>, <span class="hljs-number">0x0a6e6</span>, <span class="hljs-number">0x0a4e0</span>, <span class="hljs-number">0x0d260</span>, <span class="hljs-number">0x0ea65</span>, <span class="hljs-number">0x0d530</span>,              <span class="hljs-number">0x05aa0</span>, <span class="hljs-number">0x076a3</span>, <span class="hljs-number">0x096d0</span>, <span class="hljs-number">0x04bd7</span>, <span class="hljs-number">0x04ad0</span>, <span class="hljs-number">0x0a4d0</span>, <span class="hljs-number">0x1d0b6</span>, <span class="hljs-number">0x0d250</span>, <span class="hljs-number">0x0d520</span>, <span class="hljs-number">0x0dd45</span>,              <span class="hljs-number">0x0b5a0</span>, <span class="hljs-number">0x056d0</span>, <span class="hljs-number">0x055b2</span>, <span class="hljs-number">0x049b0</span>, <span class="hljs-number">0x0a577</span>, <span class="hljs-number">0x0a4b0</span>, <span class="hljs-number">0x0aa50</span>, <span class="hljs-number">0x1b255</span>, <span class="hljs-number">0x06d20</span>, <span class="hljs-number">0x0ada0</span>]gan = [<span class="hljs-string">&quot;甲&quot;</span>, <span class="hljs-string">&quot;乙&quot;</span>, <span class="hljs-string">&quot;丙&quot;</span>, <span class="hljs-string">&quot;丁&quot;</span>, <span class="hljs-string">&quot;戊&quot;</span>, <span class="hljs-string">&quot;己&quot;</span>, <span class="hljs-string">&quot;庚&quot;</span>, <span class="hljs-string">&quot;辛&quot;</span>, <span class="hljs-string">&quot;壬&quot;</span>, <span class="hljs-string">&quot;癸&quot;</span>]zhi = [<span class="hljs-string">&quot;子&quot;</span>, <span class="hljs-string">&quot;丑&quot;</span>, <span class="hljs-string">&quot;寅&quot;</span>, <span class="hljs-string">&quot;卯&quot;</span>, <span class="hljs-string">&quot;辰&quot;</span>, <span class="hljs-string">&quot;巳&quot;</span>, <span class="hljs-string">&quot;午&quot;</span>, <span class="hljs-string">&quot;未&quot;</span>, <span class="hljs-string">&quot;申&quot;</span>, <span class="hljs-string">&quot;酉&quot;</span>, <span class="hljs-string">&quot;戌&quot;</span>, <span class="hljs-string">&quot;亥&quot;</span>]mon_str = [<span class="hljs-string">&#x27;正&#x27;</span>, <span class="hljs-string">&#x27;二&#x27;</span>, <span class="hljs-string">&#x27;三&#x27;</span>, <span class="hljs-string">&#x27;四&#x27;</span>, <span class="hljs-string">&#x27;五&#x27;</span>, <span class="hljs-string">&#x27;六&#x27;</span>, <span class="hljs-string">&#x27;七&#x27;</span>, <span class="hljs-string">&#x27;八&#x27;</span>, <span class="hljs-string">&#x27;九&#x27;</span>, <span class="hljs-string">&#x27;十&#x27;</span>, <span class="hljs-string">&#x27;十一&#x27;</span>, <span class="hljs-string">&#x27;腊&#x27;</span>]day_str1 = [<span class="hljs-string">&#x27;初&#x27;</span>, <span class="hljs-string">&#x27;十&#x27;</span>, <span class="hljs-string">&#x27;廿&#x27;</span>]day_str2 = [<span class="hljs-string">&#x27;一&#x27;</span>, <span class="hljs-string">&#x27;二&#x27;</span>, <span class="hljs-string">&#x27;三&#x27;</span>, <span class="hljs-string">&#x27;四&#x27;</span>, <span class="hljs-string">&#x27;五&#x27;</span>, <span class="hljs-string">&#x27;六&#x27;</span>, <span class="hljs-string">&#x27;七&#x27;</span>, <span class="hljs-string">&#x27;八&#x27;</span>, <span class="hljs-string">&#x27;九&#x27;</span>, <span class="hljs-string">&#x27;十&#x27;</span>]<span class="hljs-comment"># 初始条件：1900年1月31日为农历正月初一</span>first_lunar_day = datetime(<span class="hljs-number">1900</span>, <span class="hljs-number">1</span>, <span class="hljs-number">31</span>)<span class="hljs-comment"># 获取一个农历年有多少天</span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sum_days</span>(<span class="hljs-params">offset</span>):</span>    info = lunar_info[offset]    <span class="hljs-comment"># 获取月份信息</span>    month_info = (info &amp; <span class="hljs-number">0x0ffff</span>) &gt;&gt; <span class="hljs-number">4</span>    big_month_count = <span class="hljs-number">0</span>    <span class="hljs-comment"># 循环计数有多少位二进制1，原理如下：</span>    <span class="hljs-comment"># (2)10101 - 1 = (2)10100,  </span>    <span class="hljs-comment"># (2)10101 &amp; (2)10100 = (2)10100</span>    <span class="hljs-comment"># (2)10100 - 1 = (2)10011</span>    <span class="hljs-comment"># (2)10100 &amp; (2)10011 = (2)10000</span>    <span class="hljs-comment"># 所有二进制值-1得到的结果有这样的特点：最后一位1变成0,最后一位1之后的0都变成1，其他不变</span>    <span class="hljs-comment"># 这样取 &amp; 运算会得到把最后一位1置为0的效果，循环次数便为1的数量</span>    <span class="hljs-keyword">while</span> month_info != <span class="hljs-number">0</span>:        month_info = month_info &amp; (month_info - <span class="hljs-number">1</span>)        big_month_count += <span class="hljs-number">1</span>    days = <span class="hljs-number">29</span> * <span class="hljs-number">12</span> + big_month_count    <span class="hljs-comment"># 如果有闰月</span>    <span class="hljs-keyword">if</span> (info &amp; <span class="hljs-number">0x0000f</span>) &gt; <span class="hljs-number">0</span>:        <span class="hljs-comment"># 闰月是否为大月</span>        <span class="hljs-keyword">if</span> (info &amp; <span class="hljs-number">0x10000</span>) &gt; <span class="hljs-number">0</span>:            days += <span class="hljs-number">30</span>        <span class="hljs-keyword">else</span>:            days += <span class="hljs-number">29</span>    <span class="hljs-keyword">return</span> days<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">month_str</span>(<span class="hljs-params">month</span>):</span>    <span class="hljs-keyword">return</span> mon_str[month - <span class="hljs-number">1</span>]<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">day_str</span>(<span class="hljs-params">day</span>):</span>    <span class="hljs-keyword">if</span> day == <span class="hljs-number">10</span>:        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;初十&quot;</span>    <span class="hljs-keyword">if</span> day == <span class="hljs-number">20</span>:        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;二十&quot;</span>    <span class="hljs-keyword">if</span> day == <span class="hljs-number">30</span>:        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;三十&quot;</span>    <span class="hljs-keyword">return</span> day_str1[<span class="hljs-built_in">int</span>(day / <span class="hljs-number">10</span>)] + day_str2[day % <span class="hljs-number">10</span> - <span class="hljs-number">1</span>]<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">ganzhi_year</span>(<span class="hljs-params">year</span>):</span>    offset = year - <span class="hljs-number">1864</span>  <span class="hljs-comment"># 1864是一个甲子年</span>    <span class="hljs-keyword">return</span> gan[offset % <span class="hljs-number">10</span>] + zhi[offset % <span class="hljs-number">12</span>]<span class="hljs-comment"># 获取在指定年之前有多少天</span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">lunar_str</span>(<span class="hljs-params">year, month, day</span>):</span>    interval_days = (datetime(year, month, day) - first_lunar_day).days + <span class="hljs-number">1</span>    <span class="hljs-comment"># print(&#x27;interval_days&#x27;, interval_days)</span>    sum_day = <span class="hljs-number">0</span>    year_offset = <span class="hljs-number">0</span>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:        temp = sum_day + sum_days(year_offset)        <span class="hljs-keyword">if</span> temp &gt;= interval_days:            <span class="hljs-keyword">break</span>        year_offset += <span class="hljs-number">1</span>        sum_day = temp    info = lunar_info[year_offset]  <span class="hljs-comment"># 所在年的信息</span>    rest_days = interval_days - sum_day  <span class="hljs-comment"># 还剩下多少天没有计算</span>    month = <span class="hljs-number">0</span>    month_info = (info &amp; <span class="hljs-number">0x0ffff</span>) &gt;&gt; <span class="hljs-number">4</span>    leap_month = info &amp; <span class="hljs-number">0x0000ff</span>    has_leap_month = leap_month &gt; <span class="hljs-number">0</span>    leap_month -= <span class="hljs-number">1</span>    days = <span class="hljs-number">0</span>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-number">12</span>):        temp = days        <span class="hljs-comment"># 判断是否为大月</span>        temp += <span class="hljs-number">30</span> <span class="hljs-keyword">if</span> (<span class="hljs-number">0x800</span> &gt;&gt; i) &amp; month_info &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-number">29</span>        <span class="hljs-keyword">if</span> temp &gt;= rest_days:            month = i + <span class="hljs-number">1</span>            <span class="hljs-keyword">break</span>        days = temp        <span class="hljs-keyword">if</span> has_leap_month <span class="hljs-keyword">and</span> i == leap_month:            temp += <span class="hljs-number">30</span> <span class="hljs-keyword">if</span> (info &amp; <span class="hljs-number">0x10000</span>) &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-number">29</span>  <span class="hljs-comment"># 闰月是大月还是小月</span>        <span class="hljs-keyword">if</span> temp &gt;= rest_days:            month = <span class="hljs-string">&quot;闰&quot;</span> + <span class="hljs-built_in">str</span>(i + <span class="hljs-number">1</span>)            <span class="hljs-keyword">break</span>        days = temp    day = rest_days - days    <span class="hljs-comment"># 注意农历和下一年公历重叠的情况</span>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&#123;0&#125;年 &#123;1&#125;月&#123;2&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(ganzhi_year(<span class="hljs-number">1900</span> + year_offset),  month_str(month),  day_str(day))print(lunar_str(<span class="hljs-number">2000</span>, <span class="hljs-number">2</span>, <span class="hljs-number">5</span>))print(lunar_str(<span class="hljs-number">2000</span>, <span class="hljs-number">3</span>, <span class="hljs-number">6</span>))print(lunar_str(<span class="hljs-number">2000</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>))print(lunar_str(<span class="hljs-number">2000</span>, <span class="hljs-number">5</span>, <span class="hljs-number">4</span>))print(lunar_str(<span class="hljs-number">2000</span>, <span class="hljs-number">6</span>, <span class="hljs-number">2</span>))print(lunar_str(<span class="hljs-number">2000</span>, <span class="hljs-number">7</span>, <span class="hljs-number">2</span>))print(lunar_str(<span class="hljs-number">2000</span>, <span class="hljs-number">10</span>, <span class="hljs-number">26</span>))print(lunar_str(<span class="hljs-number">2000</span>, <span class="hljs-number">10</span>, <span class="hljs-number">27</span>))print(lunar_str(<span class="hljs-number">2000</span>, <span class="hljs-number">11</span>, <span class="hljs-number">25</span>))print(lunar_str(<span class="hljs-number">2000</span>, <span class="hljs-number">11</span>, <span class="hljs-number">26</span>))print(lunar_str(<span class="hljs-number">2000</span>, <span class="hljs-number">12</span>, <span class="hljs-number">25</span>))print(lunar_str(<span class="hljs-number">2000</span>, <span class="hljs-number">12</span>, <span class="hljs-number">26</span>))print(lunar_str(<span class="hljs-number">2001</span>, <span class="hljs-number">1</span>, <span class="hljs-number">23</span>))print(lunar_str(<span class="hljs-number">2001</span>, <span class="hljs-number">1</span>, <span class="hljs-number">24</span>))print(lunar_str(<span class="hljs-number">2019</span>, <span class="hljs-number">7</span>, <span class="hljs-number">2</span>))</code></pre><p>运行结果</p><pre><code class="hljs plain">庚辰年 正月初一庚辰年 二月初一庚辰年 三月初一庚辰年 四月初一庚辰年 五月初一庚辰年 六月初一庚辰年 九月廿九庚辰年 十月初一庚辰年 十月三十庚辰年 十一月初一庚辰年 十一月三十庚辰年 腊月初一庚辰年 腊月廿九辛巳年 正月初一己亥年 五月三十</code></pre><h4 id="二十四节气"><a href="#二十四节气" class="headerlink" title="二十四节气"></a>二十四节气</h4><p>24节气是太阳历，其定义以地球在绕日轨道上的位置为基准，冬至即太阳照射到地球南回归线上的时刻，夏至为北回归线，春分秋分就是太阳直射赤道的时刻，所以二十四节气的是有精确的时刻，这个时刻所在的那一天便是节气的日期。由于地球日和公转回归年的差异，这个日期会在一两天内摇摆。</p><p>节气的定法有两种。古代历法采用的称为”恒气”，即按时间把一年等分为24份，每一节气平均得15天有余，所以又称”平气”。现代农历采用的称为”定气”，即按地球在轨道上的位置为标准，一周360°，两节气之间相隔15°。由于地球的公转轨道其实是椭圆，冬至时地球位于近日点附近，运动速度较快，因而太阳在黄道上移动15°的时间不到15天。夏至前后的情况正好相反，太阳在黄道上移动较慢，一个节气达16天之多。采用定气时可以保证春、秋两分必然在昼夜平分的那两天，可以更好的体现节气对季节的区分作用。</p><p>定义24个节气与第一个节气所相差的时间长度（分钟），然后以一个确定的时刻作为标准，上面已经说过一个公转回归年为365.2422天即 525948.768分钟，由于节气均不在元旦日期附近，即使由于闰年相差一两天也不会跨年，直接以年份和基准节气时间（本例中的1900年1月6日 2:05:00AM）的间隔*525948.768 数加上当前节气时间间隔数便是本年24节气的时间。</p><pre><code class="hljs python">solarTerm = [<span class="hljs-string">&quot;小寒&quot;</span>, <span class="hljs-string">&quot;大寒&quot;</span>, <span class="hljs-string">&quot;立春&quot;</span>, <span class="hljs-string">&quot;雨水&quot;</span>, <span class="hljs-string">&quot;惊蛰&quot;</span>, <span class="hljs-string">&quot;春分&quot;</span>, <span class="hljs-string">&quot;清明&quot;</span>, <span class="hljs-string">&quot;谷雨&quot;</span>, <span class="hljs-string">&quot;立夏&quot;</span>, <span class="hljs-string">&quot;小满&quot;</span>, <span class="hljs-string">&quot;芒种&quot;</span>, <span class="hljs-string">&quot;夏至&quot;</span>, <span class="hljs-string">&quot;小暑&quot;</span>, <span class="hljs-string">&quot;大暑&quot;</span>, <span class="hljs-string">&quot;立秋&quot;</span>, <span class="hljs-string">&quot;处暑&quot;</span>, <span class="hljs-string">&quot;白露&quot;</span>, <span class="hljs-string">&quot;秋分&quot;</span>, <span class="hljs-string">&quot;寒露&quot;</span>, <span class="hljs-string">&quot;霜降&quot;</span>, <span class="hljs-string">&quot;立冬&quot;</span>, <span class="hljs-string">&quot;小雪&quot;</span>, <span class="hljs-string">&quot;大雪&quot;</span>, <span class="hljs-string">&quot;冬至&quot;</span>]sTermInfo = [<span class="hljs-number">0</span>, <span class="hljs-number">21208</span>, <span class="hljs-number">42467</span>, <span class="hljs-number">63836</span>, <span class="hljs-number">85337</span>, <span class="hljs-number">107014</span>, <span class="hljs-number">128867</span>, <span class="hljs-number">150921</span>, <span class="hljs-number">173149</span>, <span class="hljs-number">195551</span>, <span class="hljs-number">218072</span>, <span class="hljs-number">240693</span>, <span class="hljs-number">263343</span>, <span class="hljs-number">285989</span>, <span class="hljs-number">308563</span>, <span class="hljs-number">331033</span>, <span class="hljs-number">353350</span>, <span class="hljs-number">375494</span>, <span class="hljs-number">397447</span>, <span class="hljs-number">419210</span>, <span class="hljs-number">440795</span>, <span class="hljs-number">462224</span>, <span class="hljs-number">483532</span>, <span class="hljs-number">504758</span>]<span class="hljs-comment"># 1900年小寒</span>solarTermBase = datetime(<span class="hljs-number">1900</span>, <span class="hljs-number">1</span>, <span class="hljs-number">6</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">57</span>)<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">solar_term_of_year</span>(<span class="hljs-params">year</span>):</span>    year_min = <span class="hljs-number">525948.768</span>    base_year = <span class="hljs-number">1900</span>    <span class="hljs-comment"># 指定年的小寒节气</span>    first_term_of_year = solarTermBase + timedelta(minutes=(year - base_year) * year_min)    <span class="hljs-keyword">for</span> index,minutes <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(sTermInfo):        term = first_term_of_year + timedelta(minutes=minutes)        <span class="hljs-comment"># print(term.strftime( &#x27;%Y-%m-%d %H:%M:%S&#x27;)+solarTerm[index])</span>        print(term.strftime( <span class="hljs-string">&#x27;%Y-%m-%d&#x27;</span>)+solarTerm[index])      solar_term_of_year(<span class="hljs-number">2018</span>)</code></pre><p>注意，sTermInfo数据的不准确，计算出来的值和现在查询到的2019年精确值是有误差，如果刚好在0点附近就会产生日期不对的情况，我还没找到一个准确的数据可以使用，但是作为原理的介绍没有问题</p><pre><code class="hljs angelscript"><span class="hljs-number">2018</span><span class="hljs-number">-01</span><span class="hljs-number">-05</span>小寒<span class="hljs-number">2018</span><span class="hljs-number">-01</span><span class="hljs-number">-20</span>大寒<span class="hljs-number">2018</span><span class="hljs-number">-02</span><span class="hljs-number">-04</span>立春<span class="hljs-number">2018</span><span class="hljs-number">-02</span><span class="hljs-number">-18</span>雨水<span class="hljs-number">2018</span><span class="hljs-number">-03</span><span class="hljs-number">-05</span>惊蛰<span class="hljs-number">2018</span><span class="hljs-number">-03</span><span class="hljs-number">-20</span>春分<span class="hljs-number">2018</span><span class="hljs-number">-04</span><span class="hljs-number">-05</span>清明<span class="hljs-number">2018</span><span class="hljs-number">-04</span><span class="hljs-number">-20</span>谷雨<span class="hljs-number">2018</span><span class="hljs-number">-05</span><span class="hljs-number">-05</span>立夏<span class="hljs-number">2018</span><span class="hljs-number">-05</span><span class="hljs-number">-21</span>小满<span class="hljs-number">2018</span><span class="hljs-number">-06</span><span class="hljs-number">-06</span>芒种<span class="hljs-number">2018</span><span class="hljs-number">-06</span><span class="hljs-number">-21</span>夏至<span class="hljs-number">2018</span><span class="hljs-number">-07</span><span class="hljs-number">-07</span>小暑<span class="hljs-number">2018</span><span class="hljs-number">-07</span><span class="hljs-number">-23</span>大暑<span class="hljs-number">2018</span><span class="hljs-number">-08</span><span class="hljs-number">-07</span>立秋<span class="hljs-number">2018</span><span class="hljs-number">-08</span><span class="hljs-number">-23</span>处暑<span class="hljs-number">2018</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>白露<span class="hljs-number">2018</span><span class="hljs-number">-09</span><span class="hljs-number">-23</span>秋分<span class="hljs-number">2018</span><span class="hljs-number">-10</span><span class="hljs-number">-08</span>寒露<span class="hljs-number">2018</span><span class="hljs-number">-10</span><span class="hljs-number">-23</span>霜降<span class="hljs-number">2018</span><span class="hljs-number">-11</span><span class="hljs-number">-07</span>立冬<span class="hljs-number">2018</span><span class="hljs-number">-11</span><span class="hljs-number">-22</span>小雪<span class="hljs-number">2018</span><span class="hljs-number">-12</span><span class="hljs-number">-07</span>大雪<span class="hljs-number">2018</span><span class="hljs-number">-12</span><span class="hljs-number">-22</span>冬至</code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://lzlz000.github.io/&quot;&gt;lzlz000的个人主页&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;网上能搜到不少万年历的代码，但是这应该是最详细的万年历介绍，有对天文历法、农历转换原理的的详细介绍&lt;/p&gt;
&lt;p&gt;一份万年历应该包含的内容有公历公元纪年</summary>
      
    
    
    
    
    <category term="算法" scheme="http://blog.lzlz.site/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="python" scheme="http://blog.lzlz.site/tags/python/"/>
    
    <category term="探索与发现" scheme="http://blog.lzlz.site/tags/%E6%8E%A2%E7%B4%A2%E4%B8%8E%E5%8F%91%E7%8E%B0/"/>
    
  </entry>
  
  <entry>
    <title>mysql的Ferderated引擎</title>
    <link href="http://blog.lzlz.site/2019/06/25/mysql%E7%9A%84Ferderated%E5%BC%95%E6%93%8E/"/>
    <id>http://blog.lzlz.site/2019/06/25/mysql%E7%9A%84Ferderated%E5%BC%95%E6%93%8E/</id>
    <published>2019-06-24T17:19:14.000Z</published>
    <updated>2020-11-02T16:42:54.165Z</updated>
    
    <content type="html"><![CDATA[<p><strong>Ferderated</strong> 引擎提供了以本地一张独立的表访问远程MySQL服务器上表的方法。本地不存储数据，数据全部放到远程服务器上，但是本地需要保存表结构和远程服务器的连接信息。</p><p>首先Ferderated引擎在mysql中是默认关闭的，可以使用 <strong>show engines</strong> 命令查看是否开启了该引擎：</p><p><img src="/images/1561399282036.png"></p><p>可以发现 Ferderated 的 support为 NO</p><p>我们需要在mysql配置文件中加入 federated</p><pre><code class="hljs awk">[mysqld]datadir=<span class="hljs-regexp">/var/</span>lib/mysqlsocket=<span class="hljs-regexp">/var/</span>lib<span class="hljs-regexp">/mysql/my</span>sql.sockfederated <span class="hljs-comment">#加入这一行</span>......</code></pre><p>重启服务，会发现Ferderated 已经开启</p><p><img src="/images/1561399506237.png"></p><pre><code class="hljs mysql"># 在任意mysql服务器上创建一个表，作为Ferderated的目标远程服务器，该服务器不需要开启Ferderated引擎# 本例中，表创建在127.0.0.1:3307&#x2F;mysql-testCREATE TABLE remote_fed (id INT auto_increment NOT NULL,c1 VARCHAR ( 10 ) NOT NULL DEFAULT &#39;&#39;,c2 CHAR ( 10 ) NOT NULL DEFAULT &#39;&#39;,PRIMARY KEY ( id ) ) ENGINE &#x3D; INNODB# 在开启了Ferderated引擎创建表CREATE TABLE local_fed (id INT auto_increment NOT NULL,c1 VARCHAR ( 10 ) NOT NULL DEFAULT &#39;&#39;,c2 CHAR ( 10 ) NOT NULL DEFAULT &#39;&#39;,PRIMARY KEY ( id ) ) ENGINE&#x3D;federated CONNECTION &#x3D;&#39;mysql:&#x2F;&#x2F;root:123456@127.0.0.1:3307&#x2F;mysql-test&#x2F;remote_fed&#39;</code></pre><p>一些注意事项</p><ol><li>对本地虚拟表的结构修改，并不会修改远程表的结构，但是改变自身的表结构会出现意想不到的错误</li><li>truncate 命令，会清除远程表数据 </li><li> drop命令只会删除虚拟表，并不会删除远程表</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;strong&gt;Ferderated&lt;/strong&gt; 引擎提供了以本地一张独立的表访问远程MySQL服务器上表的方法。本地不存储数据，数据全部放到远程服务器上，但是本地需要保存表结构和远程服务器的连接信息。&lt;/p&gt;
&lt;p&gt;首先Ferderated引擎在mysql中是默认关</summary>
      
    
    
    
    
    <category term="mysql" scheme="http://blog.lzlz.site/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>自制hexo评论插件（一）</title>
    <link href="http://blog.lzlz.site/2019/06/13/%E8%87%AA%E5%88%B6hexo%E8%AF%84%E8%AE%BA%E6%8F%92%E4%BB%B6%EF%BC%88%E4%B8%80%EF%BC%89/"/>
    <id>http://blog.lzlz.site/2019/06/13/%E8%87%AA%E5%88%B6hexo%E8%AF%84%E8%AE%BA%E6%8F%92%E4%BB%B6%EF%BC%88%E4%B8%80%EF%BC%89/</id>
    <published>2019-06-12T17:13:00.000Z</published>
    <updated>2020-11-02T16:42:54.175Z</updated>
    
    <content type="html"><![CDATA[<p>hexo等静态博客，现在有很多可使用的评论插件，基本都需要繁琐的注册，国内的还需要实名制审核（我本人特别特别讨厌实名制审核，有一种我在网上干什么都有别人偷窥的感觉，虽然我是守法公民，但是即使我在床上只睡觉不干其他不可描述的事情，我也不希望有摄像头对着我拍不是吗？）我就在想，能不能自己做一个？</p><p>我仔细思考了一下，确实可以做，不过是一个前端界面和一个后端服务器。但是作为一个“插件”和一个前端页面还是有区别的，我希望能尽量让使用者简单的引入，最好启用一个服务器+引入一个js文件+少量配置就可以完成。</p><p>首先，不要太复杂的功能：基本功能针对每个页面的评论、回复、邮件即可，考虑后续加上markdown语法支持，管理界面等功能。</p><h3 id="界面"><a href="#界面" class="headerlink" title="界面"></a>界面</h3><p>我尝试使用了一些现有的插件，并试图模仿他们的样式并简化功能，于是我做出了下面这样的界面：</p><p><img src="/images/1560364377217.png"></p><p>是不是还挺像那么回事的😀？</p><p>这部分的代码如下:</p><pre><code class="hljs css"><span class="hljs-selector-id">#tiny-comment</span>&#123;    <span class="hljs-attribute">margin</span>: <span class="hljs-number">10px</span> <span class="hljs-number">0</span>;    <span class="hljs-attribute">background</span>: <span class="hljs-number">#ffffff</span>;    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#C0C4CC</span>;&#125;<span class="hljs-selector-id">#tiny-comment</span> <span class="hljs-selector-class">.tiny-container</span>&#123;    <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span> <span class="hljs-number">20px</span> <span class="hljs-number">5px</span>;&#125;<span class="hljs-selector-id">#tiny-comment</span> <span class="hljs-selector-class">.tiny-footer</span>&#123;    <span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span>  <span class="hljs-number">20px</span>;    <span class="hljs-attribute">background</span>: <span class="hljs-number">#262A30</span>;    <span class="hljs-attribute">color</span>: <span class="hljs-number">#999999</span>;    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;&#125;<span class="hljs-selector-id">#tiny-comment</span> <span class="hljs-selector-class">.tiny-footer</span> <span class="hljs-selector-tag">a</span>&#123;    <span class="hljs-attribute">color</span>: <span class="hljs-number">#258FB8</span>;    <span class="hljs-attribute">text-decoration</span>:none;&#125;<span class="hljs-selector-id">#tiny-comment</span> <span class="hljs-selector-tag">input</span>&#123;    <span class="hljs-attribute">width</span>: <span class="hljs-number">150px</span>;    <span class="hljs-attribute">border</span>: none;    <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#C0C4CC</span>;    <span class="hljs-attribute">outline</span>: none;    <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">10px</span>;&#125;<span class="hljs-selector-id">#tiny-comment</span> <span class="hljs-selector-tag">input</span><span class="hljs-selector-pseudo">:focus</span>&#123;    <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#409EFF</span>;&#125;<span class="hljs-selector-id">#tiny-comment</span> <span class="hljs-selector-class">.input-wrapper</span>&#123;    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> dashed <span class="hljs-number">#C0C4CC</span>;    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">3px</span>;    <span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span>;    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>&#125;<span class="hljs-selector-id">#tiny-comment</span> <span class="hljs-selector-class">.input-wrapper</span> <span class="hljs-selector-tag">textarea</span>&#123;    <span class="hljs-comment">/* border: 1px dashed #C0C4CC; */</span>    <span class="hljs-attribute">border</span>: none;    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">5px</span>;    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;    <span class="hljs-attribute">resize</span>: vertical;    <span class="hljs-attribute">box-sizing</span>: border-box;    <span class="hljs-attribute">-webkit-box-sizing</span>: border-box;    <span class="hljs-attribute">-moz-box-sizing</span>: border-box;    <span class="hljs-attribute">outline</span>: none;&#125;<span class="hljs-selector-id">#tiny-comment</span> <span class="hljs-selector-tag">button</span>&#123;    <span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span> <span class="hljs-number">20px</span>;    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#DCDFE6</span>;    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">3px</span>;    <span class="hljs-attribute">background</span>: transparent;    <span class="hljs-attribute">outline</span>: none;    <span class="hljs-attribute">cursor</span>: pointer;    &#125;<span class="hljs-selector-id">#tiny-comment</span> <span class="hljs-selector-tag">button</span><span class="hljs-selector-pseudo">:active</span>&#123;    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#409EFF</span>;    <span class="hljs-attribute">color</span>: <span class="hljs-number">#409EFF</span>;&#125;<span class="hljs-selector-id">#tiny-comment</span> <span class="hljs-selector-class">.comment-count</span>&#123;    <span class="hljs-attribute">margin</span>: <span class="hljs-number">10px</span> <span class="hljs-number">0</span>;&#125;<span class="hljs-selector-id">#tiny-comment</span> <span class="hljs-selector-class">.segment</span>&#123;    <span class="hljs-attribute">margin</span>: <span class="hljs-number">10px</span> <span class="hljs-number">0</span>;    <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#DCDFE6</span>;&#125;<span class="hljs-selector-id">#tiny-comment</span> <span class="hljs-selector-class">.secondary</span>&#123;    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;    <span class="hljs-attribute">color</span>: <span class="hljs-number">#C0C4CC</span>;    &#125;<span class="hljs-selector-id">#tiny-comment</span> <span class="hljs-selector-class">.segment</span> <span class="hljs-selector-class">.nickname</span>&#123;    <span class="hljs-attribute">color</span>: <span class="hljs-number">#409EFF</span>;    <span class="hljs-attribute">cursor</span>: default;&#125;<span class="hljs-selector-id">#tiny-comment</span> <span class="hljs-selector-class">.comment-content</span>&#123;    <span class="hljs-attribute">margin</span>: <span class="hljs-number">12px</span>;&#125;<span class="hljs-selector-id">#tiny-comment</span> <span class="hljs-selector-class">.reply-btn</span>&#123;    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;    <span class="hljs-attribute">border</span>: none;    <span class="hljs-attribute">cursor</span>: pointer;    <span class="hljs-attribute">color</span>: <span class="hljs-number">#F56C6C</span>;    <span class="hljs-attribute">outline</span>: none;&#125;<span class="hljs-selector-id">#tiny-comment</span> <span class="hljs-selector-class">.reply-btn</span><span class="hljs-selector-pseudo">:active</span>&#123;    <span class="hljs-attribute">border</span>: none;    <span class="hljs-attribute">color</span>: <span class="hljs-built_in">rgb</span>(<span class="hljs-number">214</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);&#125;<span class="hljs-selector-id">#tiny-comment</span> <span class="hljs-selector-class">.reply</span>&#123;    <span class="hljs-attribute">margin</span>: <span class="hljs-number">5px</span> <span class="hljs-number">0</span> <span class="hljs-number">5px</span> <span class="hljs-number">20px</span>;    <span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span>;    <span class="hljs-attribute">border-top</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#DCDFE6</span>;    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">13px</span>;&#125;<span class="hljs-selector-id">#tiny-comment</span> <span class="hljs-selector-class">.reply</span> <span class="hljs-selector-class">.comment-content</span>&#123;    <span class="hljs-attribute">margin</span>: <span class="hljs-number">5px</span>;&#125;</code></pre><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;tiny-comment&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;tiny-container&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;input-wrapper&quot;</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;昵称&quot;</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;邮箱&quot;</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;邮箱不会公布，有新的回复时接收邮件&quot;</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;tiny-comment-textarea&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;你的留言...&quot;</span>  <span class="hljs-attr">rows</span>=<span class="hljs-string">&quot;5&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;height:35px;&quot;</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;float:right;&quot;</span>&gt;</span>回复<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;comment-count&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;font-weight: bold&quot;</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> 评论<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;segment&quot;</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;nickname&quot;</span>&gt;</span>匿名用户<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;secondary&quot;</span>&gt;</span>13秒前<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;reply-btn&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;float: right&quot;</span>&gt;</span>回复<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;comment-content&quot;</span>&gt;</span>            这是一条评论        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;segment&quot;</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;nickname&quot;</span>&gt;</span>匿名用户<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;secondary&quot;</span>&gt;</span>13秒前<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;reply-btn&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;float: right&quot;</span>&gt;</span>回复<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;comment-content&quot;</span>&gt;</span>            这是一条评论        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;segment&quot;</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;nickname&quot;</span>&gt;</span>匿名用户<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;secondary&quot;</span>&gt;</span>13秒前<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;reply-btn&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;float: right&quot;</span>&gt;</span>回复<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;comment-content&quot;</span>&gt;</span>            这是一条评论        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;reply&quot;</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;nickname&quot;</span>&gt;</span>匿名用户<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;secondary&quot;</span>&gt;</span>13秒前<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;reply-btn&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;float: right&quot;</span>&gt;</span>回复<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;comment-content&quot;</span>&gt;</span>这是一条回复<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;reply&quot;</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;nickname&quot;</span>&gt;</span>匿名用户<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;secondary&quot;</span>&gt;</span>13秒前<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;reply-btn&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;float: right&quot;</span>&gt;</span>回复<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;comment-content&quot;</span>&gt;</span>这是一条回复<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;reply&quot;</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;nickname&quot;</span>&gt;</span>匿名用户<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;secondary&quot;</span>&gt;</span>13秒前<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;reply-btn&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;float: right&quot;</span>&gt;</span>回复<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;comment-content&quot;</span>&gt;</span>这是一条回复<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;load-more&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;text-align: center&quot;</span>&gt;</span>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>加载更多...<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;tiny-footer&quot;</span>&gt;</span>    Powerd by <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:void(0)&quot;</span>&gt;</span>lzlz000<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></code></pre><p>接下来，我们考虑如何让前端能简单的引入这个节点呢？</p><hr><p><a href="https://lzlz000.github.io/"><img src="https://img.shields.io/badge/lzlz000-%E4%B8%AA%E4%BA%BA%E7%A9%BA%E9%97%B4-brightgreen.svg?style=flat&logo=data:image/gif;base64,R0lGODlhPAA8APf/AP/TAHsbG6ZJAGsBAcertKL75+jsZ93teMTk+o5BRruVm+72/3ILC7OGjbS7zIIqK4QyNZDDtKFbWqZuc//sN/v//8+7xN7X4eDc5JFJTa59gsHtpL+cpJx9iZ1dYpnu431xae/4/5Jpc6H965RNUIqonPH8/7rJ3MOlq/bsTm4KC9bI0ZpZXcPh9opTW6NpbKl0eqVkZOzy/nkeH8Da79jM0nUaHJNDQ3wgIZ2Cj6mcq7f1vbaLkaSToYItL4wpAHUQEIs0M+3z+ptTVOnt9enu+JFjbNO+yMHc8e/3/N3V3tXGz4E8Qoy+t5ZxfK2ru9rR2ujr9cTj+GUAAMPi+Obm7bW+0P/aAMmxuaGLmLK1xrCxwXwuMvL8/7nG2Y09Qv/WAJZPVMh6AMLg9cDb8MDY7bLuvplWWp9gZevx/IVHTo4+PrfD1r/Y7O71+nYVFXgVFdC9xW4VFqORnsy2vn4lKHY1M9rP2YY2ObmSmHMWG8KhqHwzOeLg65FGSHspLXEOD7yYnolNVI46OY5cZWsHCOzx/evw+ubn8dbJztPDzYs7Pqx4fcWoros5OYk2OHAQEoJDVnETFHYTE3gXGO30//T///X///P//34nM4VLX77W6r/X68Lf9O31//H7//b//8Pi96pwd/L+/+zy/fD6//D7/8DZ7u/5//L//8Le8/P+/8Hd8r7U6L/X7L/W6m8HB4ZNYuz0/7vN4IMnJ9fK1I04N+akANLtiv/sMNPEzMXm+6aZp6ecq69/hKhra5hMS5dUWKL/9Ojq76H349bH0KnvzKLt1af32I2zpciAAH+AduGdAMTi97eQlpVJSIcvL28kIl8AAKdxd2sNFufp77+fpbrusu32/6Jnae31/LT1w5335rK3yO30/qFGAII5Prbttezw9qqgr6ynuMHe8sLd8ngjJ+jq8uns8aD45Ofo88uzvMu1vX84PnY4NnBHQHwxNrvtrYg9P3gSDI07PdjN1nYOBbGzxM65wNPEyfH6/6NfXuzz/r7V6QAAACH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4zLWMwMTEgNjYuMTQ1NjYxLCAyMDEyLzAyLzA2LTE0OjU2OjI3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo4QUY2MjJFMDk2QTgxMUU5QjE4QTlEMjI1ODQ3MTdFQSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4QUY2MjJFMTk2QTgxMUU5QjE4QTlEMjI1ODQ3MTdFQSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjhBRjYyMkRFOTZBODExRTlCMThBOUQyMjU4NDcxN0VBIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjhBRjYyMkRGOTZBODExRTlCMThBOUQyMjU4NDcxN0VBIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEAQAA/wAsAAAAADwAPAAACP8A/wkcSLCgwYL8oAEZwBAWjmcHI0qcSHHgDUo4/ExwhoJAIw6+WPh486CiyZMEKdl4EYdIKkuWMKVKhQlmCCV58KgggbLnwRkzFBC5ZGJBv6NIkVZCZamLPhKFfvn0GaOQBnGWjCb1tKCrp0pJK5mwlO8PjqknIZxLBEprvwWjLKVaUGRdFFKmYqIC208WJiEvCqGlOCNBOkxI80Zpx8jPgwCUAuB45CGQEhOYPB1dcEnBlMERcWRIUupoKUs1sgUAFI9Qhx69eGVxosYGoDV7hGACWwkUis+gCQ7CkwRVv0qrMLBQwSeLF1VUWnRS1WlMqBb+nhCCRKvRKOOyQAX/GhB8oKQqn2QswBQIEB9ynVqc2uSvvv36nFhJOSGiUJgqiFVyyQRvlDcAHZbIgEoSaBSSgzmd0HffhPedgkA3XASQiCVvJfEAP6AFwcIl/YTgRgZybIEAJxS2OKEqp7igQhwJjqIIeYPBgkEpnpgQhh5sYOfikPad0owRsNQwSj+XBHMDWoOgQaIljBRixRhEUtjKKaGQYV8bobgQQDWomGAPjj7BUssno8QxgA5SZEkhDQ44oYWQ/pxSxjlD7LbKImg9UMoCSdDiAgJyUkhFB9JIMg4CEnayxQDsrGJJIAH4NAgMl2DCQSEn0JDofZuccgI4UxSShRQs+oOAC9CU/3kBAz7BgQUmqPhgBKKj1rcJGTS00IogUwzghHz+kGEFLHSsEkIdPgFygSWKwOIAEr36swkNRjBhxS5IGDHFFITQUIY/UjDBAkwkxNATJVGAwsgfrEg4Kiec1CHNDFvsEkoHA0whyCuctJAFJUWAMsGTKOHgzSr1GBFntsk68McUgOgQihQ9qDCAA8BawcASoDQQRE91hHBIAHNgSbE/nczCRLE9jDEGPuNoy6INHFTAAzQ94YBKH0A8wcrL9SHBiQtTdIAdEqr4Wg4XGlRg8rv9KAGEFl4inScn+LRir31jMDFBBTAwfBIQfVwASDdde80JEq+02InZFZwhQU+TWP+ASNFHe03kJqxw4UsFEPgUhC/7BNBDJ4ITufMe2kwy1SOgPCLCxJG3SIPIdygCxFSwIAIDHxF23uIYc1BSyjSDTEVLAyuowIaoqk8ohSBhWDLDYAjj0AHnuftTxiyAYBEHrWhNwgEPNrTRavFU5EAJKl+AONgkGEySA/Gdu+KKDbSjiRYtEyigwiy4qy5FB0AU4YO7wQ1AgCNqSFF350iwUcgezgBEeQQCCSwwoAO8EpwrOuEOP9TCfMEZgg/yAIseJPBlm0CACN6wAhsMkCBrwIMGVNADf7XghChMoQpRGIpddEAFBICA2j74jzX44AxTiEQsNMHDHvrwhz2MRST/VMADPDiChgWRQCF+IIAmOvGJUIziN+hhA4ggsSCTYMYVAMDFLnrxi18Eww/CcEWDAOEWWwSjGsF4hR+U0SBf+IYyxEDHOtrxjni8xxsLAgxqZOKPgAykIAeph9HtcSAqgIIpKsHIRjrykY4MAToesLdDAiEPoKiEJ75igkt48pOgvIQlsLHJSmDigYf8Bw6S4BZULAEGooilLGWZPiHwpR+gQIMt9jg7Eh2lEl3wAzxAQMxiGlMOK/hEYqAAiz0yQAml+eU+EpAMYRTgmtgswAhGYIcjmEApXcDDHuuwSaV8IgElIIYBUpACMxyAndf4QDe/iRRLaOBkZcwAYsyJ/051yGMDGzhGOABqDHl6MymjwAIcyiiBdYXlnOnExQEmSlEzGJSeRzFFLQyJxIZyiJ8lUEcKckGBklIgFxu4aFJQcQGO0tCjD0XnCLaxg5raFBnceMdBkRKCPljuihLwgC9/2YVFLCMCTUiqUpMagWjs9CghkEGmrjiEDIjSLV1wBhcgwNWuepUEVcDGZjCBCQtA8IOSgIA10BGTEFSiFKQ4RBrSYAhS2NWuhkDFAkJQkyigYB4qoN8bKUEJFjQCA0wRJSZGYYLGmuAlogwBBlDAAkq8QSqpFMgQAvCGG2rAGu3QhT3ucIcl0MEavgiGDyYxgyFkViISCEIAgMAABgzAorZACEAQKgmagAAAOw=="></a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;hexo等静态博客，现在有很多可使用的评论插件，基本都需要繁琐的注册，国内的还需要实名制审核（我本人特别特别讨厌实名制审核，有一种我在网上干什么都有别人偷窥的感觉，虽然我是守法公民，但是即使我在床上只睡觉不干其他不可描述的事情，我也不希望有摄像头对着我拍不是吗？）我就在想，</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>hexo+typora 插入图片的简便解决方案</title>
    <link href="http://blog.lzlz.site/2019/06/08/hexo-%E6%8F%92%E5%85%A5%E5%9B%BE%E7%89%87/"/>
    <id>http://blog.lzlz.site/2019/06/08/hexo-%E6%8F%92%E5%85%A5%E5%9B%BE%E7%89%87/</id>
    <published>2019-06-08T02:37:22.000Z</published>
    <updated>2020-11-02T16:42:54.155Z</updated>
    
    <content type="html"><![CDATA[<p>hexo 官方有推荐的方式，但是结合实际使用，我的文章通过typora编辑，希望能得到所见即所得的效果，还能尽可能的减少重复操作。</p><h3 id="方法1"><a href="#方法1" class="headerlink" title="方法1"></a>方法1</h3><p>通过搜索得到的解决方案最常见的是安装插件：</p><pre><code class="hljs maxima">npm install hexo-asset-<span class="hljs-built_in">image</span> --<span class="hljs-built_in">save</span></code></pre><p>这个方式其实非常不好用，首先这插件是基于 hexo2开发的，在hexo3上使用有bug,解析的图片地址 都变成了形如  xxx/.io//xxx.png ，搜索下解决方法 ，还要自己手动去 node_modules 中修改脚本才能用，我们知道，node_modules 实际上都是npm install的时候自动生成的，这样的改动以后还要反复手动操作，太难受了，此方法不可取。</p><h3 id="方法2"><a href="#方法2" class="headerlink" title="方法2"></a>方法2</h3><p>hexo官方给了两种解决方式 <a href="https://hexo.io/zh-cn/docs/asset-folders">https://hexo.io/zh-cn/docs/asset-folders</a> </p><p>一个是使用hexo的标签：</p><p><img src="/images/1559990605779.png"></p><p>这个方式看起来完美解决了问题，但是在我本地通过typora编辑文档时，是看不到图片的，不方便使用。</p><h3 id="方法3"><a href="#方法3" class="headerlink" title="方法3"></a>方法3</h3><p>使用最简单的方式在 source 目录下创建images目录，然后图片都保存在这里。</p><p>关键是要在typora上做以下设置：</p><p>在md文件头部的配置项中，添加 <code>typora-root-url: ../</code></p><pre><code class="hljs yaml"><span class="hljs-meta">---</span><span class="hljs-attr">title:</span>  <span class="hljs-string">hexo+typora</span> <span class="hljs-string">插入图片</span><span class="hljs-attr">date:</span> <span class="hljs-number">2019-06-08 10:37:22</span><span class="hljs-attr">tags:</span><span class="hljs-attr">typora-root-url:</span> <span class="hljs-string">../</span><span class="hljs-meta">---</span></code></pre><p>这样引用的图片都以上一级目录即 sourse作为根目录了，此时插入的图片时，只要点击“复制图片到…”并选择一次文件夹，以后每次都会自动保存在 sourse/image目录下，并且本地的显示和服务器上的根目录完全一致，使用体验还是很方便的。</p><p><img src="/images/1559989480817.png" alt="本地路径和服务器路径一致"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;hexo 官方有推荐的方式，但是结合实际使用，我的文章通过typora编辑，希望能得到所见即所得的效果，还能尽可能的减少重复操作。&lt;/p&gt;
&lt;h3 id=&quot;方法1&quot;&gt;&lt;a href=&quot;#方法1&quot; class=&quot;headerlink&quot; title=&quot;方法1&quot;&gt;&lt;/a&gt;方法1&lt;</summary>
      
    
    
    
    
    <category term="hexo" scheme="http://blog.lzlz.site/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>hello hexo</title>
    <link href="http://blog.lzlz.site/2019/06/07/hello-hexo/"/>
    <id>http://blog.lzlz.site/2019/06/07/hello-hexo/</id>
    <published>2019-06-07T14:11:24.000Z</published>
    <updated>2020-11-02T16:42:54.154Z</updated>
    
    <content type="html"><![CDATA[<p>目前市面上常见的静态博客框架就是 <code>hexo</code> 和 <code>jekyll</code>，由于hexo基于node而jekyll基于ruby, 而node我相对熟悉一些，因此就是用了hexo。</p><hr><p><strong>之所以想搭建一个静态页面，有以下几个原因</strong></p><p>目前我的笔记分布于简书，有道云笔记和git仓库、坚果云等多个地方，普遍采用了markdown格式，我想统一汇总整理，把可以分享的内容发布出来，不分享的hexo也提供了存储的方式。虽然是菜鸟一枚，但有时候也能帮助到正好碰到相同问题的朋友，或者对一些问题谈谈自己的看法。</p><p>在我的印象中，github.io 以前常被墙，最近似乎解除了，这就有了一个非常好的地方存放这些内容。</p><p>国内的博客系统即使是分享一些技术文章，也有可能被和谐。比如我收藏了一些关于VPS搭建的文章就失踪了。</p><h3 id="目前的问题"><a href="#目前的问题" class="headerlink" title="目前的问题"></a>目前的问题</h3><p>我用了hexo的默认主题 landscape，稍微修改了下模板，修改了 banner图片，该图片是来自<a href="https://site.douban.com/163509/">https://site.douban.com/163509/</a> 页面背景上的像素画，我非常喜欢这张图。未经授权，但是也不是商业用途，我就擅自拿了，如有侵权,请告知我,我会删除。去除了正中间的大字标题，因为我看着不舒服。</p><p>还有一些问题，当前的分享功能都是twitter、fb、google什么的，我还不知道如何添加国内常用的分享方式，以及如何使用评论功能插件。</p><h4 id="迁移问题"><a href="#迁移问题" class="headerlink" title="迁移问题"></a>迁移问题</h4><p>我尝试迁移了一些已有的笔记文件，目前遇到以下问题:</p><ol><li>一些有单行代码的地方会出现格式错误，即便它在typora或者其他支持markdown语法的网站如github、简书是显示正常的</li><li>需要手动添加 yaml front matter</li></ol><p>目前看来，格式问题较多，每个页面要手动检查并修改格式，有外部图片链接的也要手动调整，虽然调整不是很麻烦，但工作量挺大。。。 我可能不会搬运所有的文档了，整理下搬运一些值得分享的东西，而不是琐碎的笔记。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;目前市面上常见的静态博客框架就是 &lt;code&gt;hexo&lt;/code&gt; 和 &lt;code&gt;jekyll&lt;/code&gt;，由于hexo基于node而jekyll基于ruby, 而node我相对熟悉一些，因此就是用了hexo。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;之所以想搭建一个</summary>
      
    
    
    
    
    <category term="hexo" scheme="http://blog.lzlz.site/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>nginx配置反向代理</title>
    <link href="http://blog.lzlz.site/2019/04/09/nginx%E9%85%8D%E7%BD%AE%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86/"/>
    <id>http://blog.lzlz.site/2019/04/09/nginx%E9%85%8D%E7%BD%AE%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86/</id>
    <published>2019-04-08T20:23:49.000Z</published>
    <updated>2020-11-02T16:42:54.166Z</updated>
    
    <content type="html"><![CDATA[<h3 id="安装nginx"><a href="#安装nginx" class="headerlink" title="安装nginx"></a>安装nginx</h3><pre><code class="hljs cmake">yum <span class="hljs-keyword">install</span> -y nginx</code></pre><p>启动Nginx并设置开机自动运行 ：</p><pre><code class="hljs shell">systemctl start nginx.servicesystemctl enable nginx.service</code></pre><p>默认端口80<br>浏览器输入 服务器地址 即可看到 nginx的首页<br>yum 安装的 nginx 配置路径在 <strong>/etc/nginx/nginx.conf</strong> ,可以修改端口号再重启</p><h3 id="域名转发"><a href="#域名转发" class="headerlink" title="域名转发"></a>域名转发</h3><p>在本机上，我事先装了一个 nexus 私服，端口是8081，以此为例子, 我们通过域名转发把 nexus.xx.xx 转发到 xx.xx:8081.</p><p>首先，要有一个域名。</p><h6 id="配置dns-解析"><a href="#配置dns-解析" class="headerlink" title="配置dns 解析"></a>配置dns 解析</h6><p>然后新建一个DNS解析配置，把子域名 nexus.xx.xx  解析到服务器IP地址，稍等片刻，等待DNS服务器更新解析，我自己的域名使用了 <a href="https://www.dns.com/">https://www.dns.com/</a> 提供的 DNS服务器<br><img src="/images/12404.png" alt="image.png"></p><p>浏览器键入 nexus.xx.xx，进入了nginx的首页。此步骤完成</p><h6 id="配置nginx域名转发"><a href="#配置nginx域名转发" class="headerlink" title="配置nginx域名转发"></a>配置nginx域名转发</h6><p>在 nginx.conf的 http 模块中 加入一个 server </p><pre><code class="hljs shell">server   &#123;       listen 80;       server_name nexus.xx.xx;       location / &#123;           proxy_redirect off;           proxy_set_header Host $host;           proxy_set_header X-Real-IP $remote_addr;           proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;           proxy_pass http://127.0.0.1:8081; # 转发地址 可以是 baidu.com 或者任何地址       &#125;       access_log logs/nexus.log;   &#125;</code></pre><p>保存并重启服务器 （我尝试使用nginx -s reload 重新加载配置文件无效，只能重启）</p><pre><code class="hljs shell">nginx -s quitnginx</code></pre><p>浏览器键入 nexus.xx.xx 咦 404? 没错啦，这是nexus的404 nexus的web 首页在 nexus.xx.xx/nexus </p><p>END</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;安装nginx&quot;&gt;&lt;a href=&quot;#安装nginx&quot; class=&quot;headerlink&quot; title=&quot;安装nginx&quot;&gt;&lt;/a&gt;安装nginx&lt;/h3&gt;&lt;pre&gt;&lt;code class=&quot;hljs cmake&quot;&gt;yum &lt;span class=&quot;hljs-k</summary>
      
    
    
    
    
    <category term="nginx" scheme="http://blog.lzlz.site/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>量子密钥分发是如何实现的</title>
    <link href="http://blog.lzlz.site/2019/03/20/%E9%87%8F%E5%AD%90%E5%AF%86%E9%92%A5%E5%88%86%E5%8F%91%E5%8E%9F%E7%90%86-python%E5%AE%9E%E7%8E%B0/"/>
    <id>http://blog.lzlz.site/2019/03/20/%E9%87%8F%E5%AD%90%E5%AF%86%E9%92%A5%E5%88%86%E5%8F%91%E5%8E%9F%E7%90%86-python%E5%AE%9E%E7%8E%B0/</id>
    <published>2019-03-20T05:57:15.000Z</published>
    <updated>2020-11-02T16:42:54.176Z</updated>
    
    <content type="html"><![CDATA[<p>我只是一个程序员，对自然科学比较感兴趣。首先说明，我对量子力学仅停留在科普级别的了解。我仅仅利用其性质，来用代码尝试说明量子加密是如何实现的，仅供拓展思维。打个比方，本文对量子加密的讨论就如同通过“窜天猴”鞭炮作为demo来了解运载火箭的原理。</p><p><img src="/images/12402.png" alt="本文内容"> <img src="/images/124.png" alt="量子通讯"></p><h4 id="观测对测量结果的影响"><a href="#观测对测量结果的影响" class="headerlink" title="观测对测量结果的影响"></a>观测对测量结果的影响</h4><p>观测对测量结果产生影响的这种思想，真的对我的世界观产生了极大的挑战，世间万物居然遵循着这样的规律运行，让人感觉十分奇妙。</p><p>一个宏观对象，假设他有a,b,c 3个属性，该属性在对象生成时就确定，值可以为0或者1。就如同你生来就是男生/女生 不可修改，当然现在可以变性，但是实际上你的基因并不会改变，仅仅是“形似”罢了。</p><pre><code class="hljs python"><span class="hljs-keyword">import</span> random<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Object</span>:</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span>        self.__a = random.randint(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>)        self.__b = random.randint(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>)        self.__c = random.randint(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>)        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_a</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-keyword">return</span> self.__a    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_b</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-keyword">return</span> self.__b    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_c</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-keyword">return</span> self.__bo = Object()print(<span class="hljs-string">&quot;a:&quot;</span>+<span class="hljs-built_in">str</span>(o.get_a())+<span class="hljs-string">&quot; b:&quot;</span>+<span class="hljs-built_in">str</span>(o.get_b())+<span class="hljs-string">&quot; c:&quot;</span>+<span class="hljs-built_in">str</span>(o.get_c()))print(<span class="hljs-string">&quot;b:&quot;</span>+<span class="hljs-built_in">str</span>(o.get_b())+<span class="hljs-string">&quot; a:&quot;</span>+<span class="hljs-built_in">str</span>(o.get_a()))print(<span class="hljs-string">&quot;c:&quot;</span>+<span class="hljs-built_in">str</span>(o.get_a())+<span class="hljs-string">&quot; b:&quot;</span>+<span class="hljs-built_in">str</span>(o.get_b()))print(<span class="hljs-string">&quot;a:&quot;</span>+<span class="hljs-built_in">str</span>(o.get_a())+<span class="hljs-string">&quot; c:&quot;</span>+<span class="hljs-built_in">str</span>(o.get_b()))</code></pre><p>显而易见，对象生成后它的属性便是一个确定的值，该结果不会因为你的测量顺序而改变。比如你是一个汉族男性，不会因为先检查你的性别还是先检查你的民族而有所差别，在人类没有发现量子世界的性质之前，世间万物皆为如此。可能的运行结果：</p><pre><code class="hljs shell">a:1 b:0 c:0b:0 a:1c:0 b:0a:1 c:0</code></pre><p><strong>量子的观测不对异性</strong><br>对量子的不同特征进行测量，观测的顺序会影响测量的结果，这种性质被称为 “量子的观测不对异性” 。嗯，一个充满哲♂学气息的性质，可见量子是个gay，观测只对同性。<br>注意，该结果不是随机的，而是“叠加的”，因为当你的测量顺序一定时得到的结果是确定的。在两个属性（a,b）的情况下，一个量子的观测方式有[a,b],[b,a]两种，因此其a,b属性应该是两种状态的叠加。以此类推我们用代码来描述一个拥有a,b,c 3个属性的“量子对象”。</p><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TreeNode</span>:</span>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span>            self.__children = &#123;&#125;            self.__val = random.randint(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>)                <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_child</span>(<span class="hljs-params">self, name, child</span>):</span>            self.__children[name]=child            <span class="hljs-keyword">return</span> child <span class="hljs-comment"># 方便连续调用简化代码</span>                <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_child</span>(<span class="hljs-params">self, name</span>):</span>            <span class="hljs-keyword">return</span> self.__children[name]                <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_val</span>(<span class="hljs-params">self</span>):</span>            <span class="hljs-keyword">return</span> self.__val<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Quantum</span>:</span>    <span class="hljs-comment">#关于叠加态 我们可以用树结构来维护</span>    <span class="hljs-comment">#一个3个属性的量子，可表示为,</span>    <span class="hljs-comment">#     root</span>    <span class="hljs-comment">#   /   |   \</span>    <span class="hljs-comment">#  a    b    c</span>    <span class="hljs-comment">#  /\   /\   /\</span>    <span class="hljs-comment"># b  c a  c a  b </span>    <span class="hljs-comment"># |  | |  | |  |</span>    <span class="hljs-comment"># c  b c  a b  a</span>        <span class="hljs-comment"># 测量方式，队列，如果新的测量属性和队列中最后一个值不一致则加入队列，</span>    <span class="hljs-comment"># 如果队列长度大于（属性数-1）则头部数据出列，，为了便于理解，假设有abc三个属性</span>    <span class="hljs-comment"># 测量属性 队列值</span>    <span class="hljs-comment"># a       [a]</span>    <span class="hljs-comment"># b       [a,b]  </span>    <span class="hljs-comment"># c       [b,c]  </span>    <span class="hljs-comment"># c       [b,c]   和最后一次测量一样 不发生改变</span>    <span class="hljs-comment"># a       [c,a]  </span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span>        self.route = []        root = TreeNode()        self.root = root        root.set_child(<span class="hljs-string">&#x27;a&#x27;</span>,TreeNode()).set_child(<span class="hljs-string">&#x27;b&#x27;</span>,TreeNode()).set_child(<span class="hljs-string">&#x27;c&#x27;</span>,TreeNode())        root.get_child(<span class="hljs-string">&#x27;a&#x27;</span>).set_child(<span class="hljs-string">&#x27;c&#x27;</span>,TreeNode()).set_child(<span class="hljs-string">&#x27;b&#x27;</span>,TreeNode())        root.set_child(<span class="hljs-string">&#x27;b&#x27;</span>,TreeNode()).set_child(<span class="hljs-string">&#x27;a&#x27;</span>,TreeNode()).set_child(<span class="hljs-string">&#x27;c&#x27;</span>,TreeNode())        root.get_child(<span class="hljs-string">&#x27;b&#x27;</span>).set_child(<span class="hljs-string">&#x27;c&#x27;</span>,TreeNode()).set_child(<span class="hljs-string">&#x27;a&#x27;</span>,TreeNode())        root.set_child(<span class="hljs-string">&#x27;c&#x27;</span>,TreeNode()).set_child(<span class="hljs-string">&#x27;a&#x27;</span>,TreeNode()).set_child(<span class="hljs-string">&#x27;b&#x27;</span>,TreeNode())        root.get_child(<span class="hljs-string">&#x27;c&#x27;</span>).set_child(<span class="hljs-string">&#x27;b&#x27;</span>,TreeNode()).set_child(<span class="hljs-string">&#x27;a&#x27;</span>,TreeNode())        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__get</span>(<span class="hljs-params">self, name</span>):</span>        length = <span class="hljs-built_in">len</span>(self.route)        <span class="hljs-keyword">if</span> (length == <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> self.route[<span class="hljs-number">-1</span>]!=name):            self.route.append(name)            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">len</span>(self.route) &gt;<span class="hljs-number">2</span>):                self.route.pop(<span class="hljs-number">0</span>)        node = self.root        <span class="hljs-keyword">for</span> name <span class="hljs-keyword">in</span> self.route:            node = node.get_child(name)        <span class="hljs-keyword">return</span> node.get_val()    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_a</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-keyword">return</span> self.__get(<span class="hljs-string">&#x27;a&#x27;</span>)    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_b</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-keyword">return</span> self.__get(<span class="hljs-string">&#x27;b&#x27;</span>)    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_c</span>(<span class="hljs-params">self</span>):</span>        <span class="hljs-keyword">return</span> self.__get(<span class="hljs-string">&#x27;c&#x27;</span>)</code></pre><p>好了，我们已经通过代码实现了“观测对测量结果产生影响”的效果。每一次get属性值，就是对对象的一次观测，不同观测顺序下，变量会返回不同的值。</p><pre><code class="hljs python"><span class="hljs-comment"># 创造一个量子并对他的属性反复观测</span>q = Quantum()print(<span class="hljs-string">&#x27;a&#x27;</span>,q.get_a())print(<span class="hljs-string">&#x27;b&#x27;</span>,q.get_a())print(<span class="hljs-string">&#x27;a&#x27;</span>,q.get_b())print(<span class="hljs-string">&#x27;c&#x27;</span>,q.get_c())print(<span class="hljs-string">&#x27;a&#x27;</span>,q.get_a())print(<span class="hljs-string">&#x27;b&#x27;</span>,q.get_a())print(<span class="hljs-string">&#x27;a&#x27;</span>,q.get_a())</code></pre><p>可能的运行结果</p><pre><code class="hljs shell">a 0b 0a 1c 1a 0b 0a 0</code></pre><h4 id="量子秘钥分发"><a href="#量子秘钥分发" class="headerlink" title="量子秘钥分发"></a>量子秘钥分发</h4><p>通过量子的物理性质，保证了秘钥分发时的绝对安全<br>用代码来模拟该过程：</p><pre><code class="hljs ruby">from quantum import Quantumimport random<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Observer</span>:</span>    length = <span class="hljs-number">20</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span><span class="hljs-params">(<span class="hljs-keyword">self</span>, name)</span></span><span class="hljs-symbol">:</span>        <span class="hljs-keyword">self</span>.name = name        <span class="hljs-keyword">self</span>.q_list = []  <span class="hljs-comment"># 量子集合</span>    <span class="hljs-comment"># 初始化量子集合</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">init_quantum</span><span class="hljs-params">(<span class="hljs-keyword">self</span>)</span></span><span class="hljs-symbol">:</span>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(Observer.length)<span class="hljs-symbol">:</span>            <span class="hljs-keyword">self</span>.q_list.append(Quantum())    <span class="hljs-comment"># 观测</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">observe</span><span class="hljs-params">(<span class="hljs-keyword">self</span>)</span></span><span class="hljs-symbol">:</span>        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__observe</span><span class="hljs-params">(quantum)</span></span><span class="hljs-symbol">:</span>            ran = random.randint(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>)            <span class="hljs-comment">#最常见的光量子就有“线偏振”和“圆偏振”两种属性</span>            <span class="hljs-comment"># 只使用a,b两个属性 来模拟这种情况</span>            <span class="hljs-keyword">if</span> (ran == <span class="hljs-number">0</span>)<span class="hljs-symbol">:</span>                <span class="hljs-keyword">return</span> (<span class="hljs-string">&#x27;a&#x27;</span>, q.get_a())            <span class="hljs-symbol">else:</span>                <span class="hljs-keyword">return</span> (<span class="hljs-string">&#x27;b&#x27;</span>, q.get_b())        <span class="hljs-keyword">self</span>.path = []        <span class="hljs-keyword">self</span>.result = []        <span class="hljs-keyword">for</span> q <span class="hljs-keyword">in</span> <span class="hljs-keyword">self</span>.<span class="hljs-symbol">q_list:</span>            result = __observe(q)            <span class="hljs-keyword">self</span>.path.append(result[<span class="hljs-number">0</span>])            <span class="hljs-keyword">self</span>.result.append(result[<span class="hljs-number">1</span>])        print(<span class="hljs-keyword">self</span>.name,<span class="hljs-string">&#x27;观测方式：&#x27;</span>, <span class="hljs-keyword">self</span>.path)        print(<span class="hljs-keyword">self</span>.name,<span class="hljs-string">&#x27;观测结果：&#x27;</span>, <span class="hljs-keyword">self</span>.result)        <span class="hljs-comment"># 从另一个观测者获取量子序列</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_quantum</span><span class="hljs-params">(<span class="hljs-keyword">self</span>, another)</span></span><span class="hljs-symbol">:</span>        <span class="hljs-keyword">self</span>.q_list=another.q_list        <span class="hljs-comment"># 从另一个观测者获取观测方式</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_path</span><span class="hljs-params">(<span class="hljs-keyword">self</span>, another)</span></span><span class="hljs-symbol">:</span>        <span class="hljs-keyword">self</span>.key = []        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(Observer.length)<span class="hljs-symbol">:</span>            <span class="hljs-keyword">if</span> (another.path[i] == <span class="hljs-keyword">self</span>.path[i])<span class="hljs-symbol">:</span>                <span class="hljs-keyword">self</span>.key.append(<span class="hljs-keyword">self</span>.result[i])        print(<span class="hljs-keyword">self</span>.name,<span class="hljs-string">&#x27;秘钥：&#x27;</span>, <span class="hljs-keyword">self</span>.key)</code></pre><p>观测和秘钥传输</p><pre><code class="hljs reasonml">sender = <span class="hljs-constructor">Observer(&#x27;发送者&#x27;)</span>sender.init<span class="hljs-constructor">_quantum()</span> # 初始化量子序列sender.observe<span class="hljs-literal">()</span> # 对量子序列进行观测reciver = <span class="hljs-constructor">Observer(&#x27;接收者&#x27;)</span>reciver.get<span class="hljs-constructor">_quantum(<span class="hljs-params">sender</span>)</span> # 发送者把量子传输给接收者reciver.observe<span class="hljs-literal">()</span> # 接收者对其观测# 双方交换观察方式sender.get<span class="hljs-constructor">_path(<span class="hljs-params">reciver</span>)</span>reciver.get<span class="hljs-constructor">_path(<span class="hljs-params">sender</span>)</span></code></pre><p>可以得到这样的运行结果：</p><pre><code class="hljs shell">发送者 观测方式： [&#x27;b&#x27;, &#x27;b&#x27;, &#x27;a&#x27;, &#x27;a&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;b&#x27;, &#x27;a&#x27;, &#x27;a&#x27;, &#x27;a&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;b&#x27;, &#x27;b&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;b&#x27;, &#x27;b&#x27;]发送者 观测结果： [0, 0, 0, 1, 1, 1, 1, 0, 1, 0, 0, 1, 0, 0, 1, 0, 1, 1, 1, 1]接收者 观测方式： [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;a&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;b&#x27;, &#x27;a&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;b&#x27;, &#x27;b&#x27;, &#x27;b&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;b&#x27;, &#x27;b&#x27;, &#x27;b&#x27;, &#x27;b&#x27;, &#x27;b&#x27;, &#x27;a&#x27;]接收者 观测结果： [0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0, 1, 0, 0, 1, 1, 0]发送者 秘钥： [0, 0, 1, 1, 0, 1, 0, 0, 1, 1]接收者 秘钥： [0, 0, 1, 1, 0, 1, 0, 0, 1, 1]</code></pre><h4 id="如何保证安全"><a href="#如何保证安全" class="headerlink" title="如何保证安全"></a>如何保证安全</h4><p>在模拟的代码中，“量子的观测不对异性” 通过存储观测方式 path 在Quantum对象中实现。这是我们在宏观世界来模拟这种现象的一种实现手段，实际上这是一种基本物理性质，观测者不可能从量子上得到之前对它观测的方式。</p><p><strong>量子不可克隆</strong><br>要保证安全还需要量子的另一个特性“量子不可克隆”。就是说，世间没有两个相同的量子，你不可能通过一个已得到的量子获得完全相同的另一个量子。没有这个原理，窃听者完全可以复制一个量子对它进行观测并把原来的量子传送给接收者。</p><p><strong>窃听过程</strong><br>知道上述两个物理性质后，如果有人试图监听，便是只能中截获了发送者传输的量子，并观测其值，然后再把它发送给接收者。然而此时所有人都不知道发送者的观测方式。窃听者也只能按自己的想法随意观测其属性。但没有关系，你对量子的观测便改变了量子的状态，当接收者获取到量子时，即便和发送者用同样的方式观测，也有可能得到不同的结果，当这个序列数量非常大的时候,这是必然发生的，结果就是得到了和发送者不一样的秘钥，这样窃听便被发现了。</p><p>模拟上述过程：</p><pre><code class="hljs python">sender = Observer(<span class="hljs-string">&#x27;发送者&#x27;</span>)sender.init_quantum() <span class="hljs-comment"># 初始化量子序列</span>sender.observe() <span class="hljs-comment"># 对量子序列进行观测</span>interceptor = Observer(<span class="hljs-string">&#x27;窃听者&#x27;</span>)interceptor.get_quantum(sender) <span class="hljs-comment"># 截取信息</span>interceptor.observe() <span class="hljs-comment"># 观测</span>reciver = Observer(<span class="hljs-string">&#x27;接收者&#x27;</span>)reciver.get_quantum(interceptor) <span class="hljs-comment"># 发送者把量子传输给接收者</span>reciver.observe() <span class="hljs-comment"># 接收者对其观测</span><span class="hljs-comment"># 双方交换观察方式</span>sender.get_path(reciver)reciver.get_path(sender)</code></pre><p>运行结果：</p><pre><code class="hljs shell">发送者 观测方式： [&#x27;b&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;b&#x27;, &#x27;b&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;b&#x27;, &#x27;a&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;b&#x27;, &#x27;b&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;a&#x27;]发送者 观测结果： [1, 1, 1, 0, 1, 0, 1, 1, 0, 1, 1, 0, 1, 0, 0, 0, 1, 0, 1, 1]窃听者 观测方式： [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;b&#x27;, &#x27;b&#x27;, &#x27;b&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;a&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;b&#x27;, &#x27;b&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;b&#x27;, &#x27;b&#x27;, &#x27;b&#x27;, &#x27;b&#x27;]窃听者 观测结果： [0, 1, 1, 1, 1, 0, 1, 1, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 1, 0]接收者 观测方式： [&#x27;a&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;b&#x27;, &#x27;a&#x27;, &#x27;a&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;b&#x27;, &#x27;b&#x27;, &#x27;b&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;b&#x27;, &#x27;b&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;a&#x27;]接收者 观测结果： [0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 1, 0]发送者 秘钥： [1, 1, 1, 0, 0, 0, 0, 1, 0, 1, 1]接收者 秘钥： [1, 0, 1, 0, 0, 0, 0, 1, 1, 1, 0]</code></pre><p>代码请参考<br><a href="https://github.com/lzlz000/simple-clear-knowledge/tree/master/%5Bpython%5D%E9%87%8F%E5%AD%90%E9%80%9A%E8%AE%AF">https://github.com/lzlz000/simple-clear-knowledge/tree/master/%5Bpython%5D%E9%87%8F%E5%AD%90%E9%80%9A%E8%AE%AF</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;我只是一个程序员，对自然科学比较感兴趣。首先说明，我对量子力学仅停留在科普级别的了解。我仅仅利用其性质，来用代码尝试说明量子加密是如何实现的，仅供拓展思维。打个比方，本文对量子加密的讨论就如同通过“窜天猴”鞭炮作为demo来了解运载火箭的原理。&lt;/p&gt;
&lt;p&gt;&lt;img sr</summary>
      
    
    
    
    
    <category term="python" scheme="http://blog.lzlz.site/tags/python/"/>
    
    <category term="探索与发现" scheme="http://blog.lzlz.site/tags/%E6%8E%A2%E7%B4%A2%E4%B8%8E%E5%8F%91%E7%8E%B0/"/>
    
  </entry>
  
  <entry>
    <title>RSA算法原理</title>
    <link href="http://blog.lzlz.site/2019/03/15/RSA%E7%AE%97%E6%B3%95/"/>
    <id>http://blog.lzlz.site/2019/03/15/RSA%E7%AE%97%E6%B3%95/</id>
    <published>2019-03-14T16:00:00.000Z</published>
    <updated>2020-11-02T16:42:54.148Z</updated>
    
    <content type="html"><![CDATA[<h4 id="算法介绍"><a href="#算法介绍" class="headerlink" title="算法介绍"></a>算法介绍</h4><ol><li>随意选择两个大的素数  p q</li><li><code>n = p * q</code></li><li><code>φ(n) = (p-1)(q-1)</code>  (欧拉函数)</li><li>公钥e: 满足 <code>1&lt;e&lt;φ(n)</code>的整数 且和 φ(n)互质</li><li>私钥d: 满足 <code>e*d mod φ(n)==1</code></li><li>销毁p, q</li><li>公开发布 n和公钥 e</li></ol><p>加密解密：</p><ol><li>加密，明文m (m应为小于n的整数)，m的e次幂取n的余数，得到值c即为密文<br>$c = m^e mod(n)$</li><li>解密， 计算密文c的d次幂取n的余数，即得到明文m</li></ol><p>整体流程的简易代码 (python3)</p><pre><code class="hljs python"><span class="hljs-comment"># 欧几里得算法 （辗转相除法） 求最大公约数</span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">gcd</span>(<span class="hljs-params">m, n</span>):</span>    mod = <span class="hljs-number">1</span>    <span class="hljs-comment"># 将小数放到d1中</span>    <span class="hljs-keyword">if</span>(m &lt;= n):        d1 = m        d2 = n    <span class="hljs-keyword">else</span>:        d1 = n        d2 = m    <span class="hljs-keyword">while</span> mod != <span class="hljs-number">0</span>:        mod = d2 % d1        d2 = d1        d1 = mod    <span class="hljs-keyword">return</span> d2<span class="hljs-comment"># 真实情况下应该是很大的素数 通常为512、1024、2048位二进制数,如1024位二进制整数大约为十进制10^308数量级</span><span class="hljs-comment"># 计算得到秘钥然后以一定规则编码成字符串形式，形成常见的秘钥</span>p = <span class="hljs-number">41</span>q = <span class="hljs-number">43</span>n = p * q<span class="hljs-comment"># 欧拉函数</span>phi = (p<span class="hljs-number">-1</span>)*(q<span class="hljs-number">-1</span>)<span class="hljs-comment"># 1&lt;e&lt;φ(n)的整数 且和 φ(n)互质</span>publicKey = <span class="hljs-number">2</span><span class="hljs-comment"># 检查是否互质 否则+1</span><span class="hljs-keyword">while</span> gcd(phi, publicKey) != <span class="hljs-number">1</span>:    publicKey = publicKey+<span class="hljs-number">1</span><span class="hljs-comment"># 私钥d: e*d%φ(n)==1</span>privateKey = (phi + <span class="hljs-number">1</span>) * publicKeyprint(<span class="hljs-string">&quot;公钥:&quot;</span>, publicKey,<span class="hljs-string">&quot;私钥:&quot;</span>, privateKey,<span class="hljs-string">&quot;n:&quot;</span>, n)<span class="hljs-comment"># 存储在计算机里的一切信息都可以认为是一串按一定规则序列化成的数字</span>content = <span class="hljs-number">412</span>  <span class="hljs-comment"># 密文的值要小于 p * q,否则需要分段加密</span>cipher = <span class="hljs-built_in">pow</span>(content, publicKey, n)print(<span class="hljs-string">&quot;密文&quot;</span>, cipher)content1 = <span class="hljs-built_in">pow</span>(cipher, privateKey, n)print(<span class="hljs-string">&quot;明文&quot;</span>, content1)</code></pre><h5 id="幂模运算"><a href="#幂模运算" class="headerlink" title="幂模运算"></a>幂模运算</h5><p>上述代码中 通过 <strong>pow(a, b, c)**获取 a的b次幂取c的模，该函数在python中是一个自带的函数，然而在其他常见语言的自带库（如java、js等）中，pow() 函数/方法 通常没有取模的功能，</strong>千万不可用 pow(a,b)%c代替该运算**。上文的简单例子中，私钥的值已经高达 18491，任何一个大于1整数的18491次幂都已经是个天文数字，在大多数语言中运行时得到的已经不是一个精确的结果，取模的值是错误的。更不要说实际上使用的大素数，经过这样的运算，得到的值大到计算机内存肯定是存不下的。</p><p>如果你不想深入了解该问题，在任何常用语言中，可以轻易找到科学计算库，都带有该算法，如果你还有兴趣，请搜索“蒙哥马利幂模运算”，也很容易理解。</p><h5 id="获取大素数"><a href="#获取大素数" class="headerlink" title="获取大素数"></a>获取大素数</h5><p>我们知道判断一个数是否为素数的方法是这样：</p><pre><code class="hljs python"><span class="hljs-keyword">import</span> math         <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">isPrime</span>(<span class="hljs-params">n</span>):</span>        <span class="hljs-keyword">if</span> n &lt;= <span class="hljs-number">1</span>:            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>       <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, <span class="hljs-built_in">int</span>(math.sqrt(n)) + <span class="hljs-number">1</span>):        <span class="hljs-keyword">if</span> n % i == <span class="hljs-number">0</span>:            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>       <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span></code></pre><p>然而我们如果要获取一个大素数，如果把大数一个一个遍历直到找到一个素数其实是很低效的。因此我们通过一些素数的性质或者其规律，通过更有效率的办法筛选出可能符合要求的整数，然后对其进行精确的判断是实际常用的方法。参考下面的链接：<br><a href="https://www.zhihu.com/question/293656940/answer/512820832">https://www.zhihu.com/question/293656940/answer/512820832</a></p><h4 id="为什么RSA算法能保证安全？"><a href="#为什么RSA算法能保证安全？" class="headerlink" title="为什么RSA算法能保证安全？"></a>为什么RSA算法能保证安全？</h4><p>公开场合只能获取到公钥对 (n,publicKey)<br>publicKey 和 privateKey 的对应关系为  <em>publicKey = privateKey((p-1)(q-1)+1)</em>,<br>而p,q在算法中已经被销毁了，我们只知道p,q的乘积n，通过n分解质因数找到质数p,q的是一个指数级别复杂度的算法，在实际使用中，p,q都是10的几百次方数量级的大数，计算出p,q对于现代计算机来说可以认为是一个在有限时间内不可解的问题。</p><h4 id="随便写点"><a href="#随便写点" class="headerlink" title="随便写点"></a>随便写点</h4><p>相比技术问题，我更喜欢谈谈技术和技术以外事物的关系，从今天起开始写简明知识系列文章，其内容一般以代码作为载体，以简明的方式，短小的篇幅写下和编程相关的技术问题，也谈谈相关的非技术问题。</p><p>RSA算法被认为是世界上最重要的算法之一。二战时期，科技强如德国，密码都可以被盟军破译。然而现在个人就可以对信息做到理论级别不可破解的方式加密，2016年“苹果fbi事件”就是如此。因此双向加密算法被用在了了生活中的方方面面，从https到你的银行账户，无处不在。</p><blockquote><p>联邦调查局将CNET引向联邦调查局长詹姆斯·科米（James Comey）的言论，科米谈到美国如何始终平衡隐私与公共安全，以及加密技术如何破坏了这种平衡。“强加密的逻辑意味着所有人的生命，包括执法，都将很快受到强加密的影响。”他说。“在我看来，根据我们的历史和我们的价值观，绝对的隐私以及那些认为政府应该把手从人民手机上拿开的想法没有任何意义。”</p></blockquote><p>拿不到私钥，即使强如国家暴力也无法获取你加密的任何信息，打破了强弱力量之间的平衡，让个人通过技术获取了可以对抗强权的小小手段。</p><p>量子计算机的发展让在有限时间内破解私钥在未来变得有可能实现，因此情报部门如今会截获并保存他们认为有可能有价值的密文信息和公钥对，在破解私钥实现后便可得到其信息。然而每天世界上通讯中的加密数据海量，数据价值的时效性也有限，因此RSA算法保证信息的安全性在目前还是没有问题滴 : ）</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;算法介绍&quot;&gt;&lt;a href=&quot;#算法介绍&quot; class=&quot;headerlink&quot; title=&quot;算法介绍&quot;&gt;&lt;/a&gt;算法介绍&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;随意选择两个大的素数  p q&lt;/li&gt;
&lt;li&gt;&lt;code&gt;n = p * q&lt;/code&gt;&lt;/li&gt;
&lt;li</summary>
      
    
    
    
    
    <category term="算法" scheme="http://blog.lzlz.site/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="python" scheme="http://blog.lzlz.site/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>java正则表达式-环视、反向引用、贪婪</title>
    <link href="http://blog.lzlz.site/2019/03/01/java%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F-%E7%8E%AF%E8%A7%86%E4%B8%8E%E8%B4%AA%E5%A9%AA/"/>
    <id>http://blog.lzlz.site/2019/03/01/java%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F-%E7%8E%AF%E8%A7%86%E4%B8%8E%E8%B4%AA%E5%A9%AA/</id>
    <published>2019-03-01T05:29:42.000Z</published>
    <updated>2020-11-02T16:42:54.156Z</updated>
    
    <content type="html"><![CDATA[<h3 id="环视"><a href="#环视" class="headerlink" title="环视"></a>环视</h3><h4 id="什么是环视"><a href="#什么是环视" class="headerlink" title="什么是环视"></a>什么是环视</h4><p> 环视顾名思义就是从四周看。正则表达式一向都是从左向右工作的，但是环视也能从右向左工作。最典型的列子就是给你一个数字如12345678，需要你改成12，345，678这种格式。如果按照我们的思维来，应该是会从右边开始划分吧，每三个数字加一个逗号。环视就能按照我们的思维去解决这样的问题。这里要注意的是环视不匹配任何字符，只是匹配位置而已。作用和^,&amp;相似。环视又分为顺序环视和逆序环视。也就是从左到右工作和从右到左的区别.顺序环视在正则中用(?=)表示，包含括号。逆序用(?&lt;=)</p><h4 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h4><p><strong>(?=Expression)</strong>  顺序肯定环视，表示所在位置右侧能够匹配Expression<br>**(?!Expression)**   顺序否定环视，表示所在位置右侧不能匹配Expression<br>**(?&lt;=Expression)** 逆序肯定环视，表示所在位置左侧能够匹配Expression<br>**(?&lt;!Expression)**  逆序否定环视，表示所在位置左侧不能匹配Expression</p><p><strong>java中的使用方法</strong></p><pre><code class="hljs java"><span class="hljs-comment">// 匹配 前缀为 test的字母</span>String s = <span class="hljs-string">&quot;123testabc abc 123testLttt&quot;</span>;Pattern pattern = Pattern.compile(<span class="hljs-string">&quot;(?&lt;=test)\\w+&quot;</span>);Matcher matcher = pattern.matcher(s);<span class="hljs-keyword">while</span> (matcher.find()) &#123;System.out.println(matcher.group());&#125;</code></pre><h3 id="反向引用"><a href="#反向引用" class="headerlink" title="反向引用"></a>反向引用</h3><p>按照()子表达式划分成若干组；每出现一对()就是一个捕获组；引擎会对捕获组进行编号，编号规则是左括号(从左到右出现的顺序，从1开始编号。</p><p><strong>例：</strong></p><p><strong>\1</strong> 代表对第一次匹配 <strong>(\w+)</strong> 的引用</p><p>在使用了括号来包裹表达式后，matcher.groupCount()的值&gt;0，可以通过其获取捕获的值</p><pre><code class="hljs java">String s = <span class="hljs-string">&quot;123testabc abc 123testLttt&quot;</span>;Pattern pattern = Pattern.compile(<span class="hljs-string">&quot;(\\w+) \\1&quot;</span>);Matcher matcher = pattern.matcher(s);System.out.println(matcher.groupCount());<span class="hljs-keyword">while</span> (matcher.find()) &#123;    System.out.println(matcher.group(<span class="hljs-number">0</span>));    System.out.println(matcher.group(<span class="hljs-number">1</span>));&#125;</code></pre><h3 id="贪婪"><a href="#贪婪" class="headerlink" title="贪婪"></a>贪婪</h3><p>java中正则默认为贪婪模式，即尽可能多的匹配多的字符， “趋向于最大长度匹配”</p><pre><code class="hljs java">String s = <span class="hljs-string">&quot;&lt;div&gt;hello&lt;/div&gt;&lt;div&gt;world&lt;/div&gt;&quot;</span>;Pattern pattern = Pattern.compile(<span class="hljs-string">&quot;&lt;div&gt;.*&lt;/div&gt;&quot;</span>);Matcher matcher = pattern.matcher(s);<span class="hljs-keyword">while</span> (matcher.find()) &#123;    System.out.println(matcher.group());&#125;</code></pre><p>结果 </p><pre><code class="hljs applescript">&lt;<span class="hljs-keyword">div</span>&gt;hello&lt;/<span class="hljs-keyword">div</span>&gt;&lt;<span class="hljs-keyword">div</span>&gt;world&lt;/<span class="hljs-keyword">div</span>&gt;</code></pre><p><strong>非贪婪</strong></p><p>使用方法 在需要匹配的串后面加上 <strong>?</strong></p><pre><code class="hljs java">String s = <span class="hljs-string">&quot;&lt;div&gt;hello&lt;/div&gt;&lt;div&gt;world&lt;/div&gt;&quot;</span>;Pattern pattern = Pattern.compile(<span class="hljs-string">&quot;&lt;div&gt;.*?&lt;/div&gt;&quot;</span>);Matcher matcher = pattern.matcher(s);<span class="hljs-keyword">while</span> (matcher.find()) &#123;    System.out.println(matcher.group());&#125;</code></pre><p>结果</p><pre><code class="hljs applescript">&lt;<span class="hljs-keyword">div</span>&gt;hello&lt;/<span class="hljs-keyword">div</span>&gt;&lt;<span class="hljs-keyword">div</span>&gt;world&lt;/<span class="hljs-keyword">div</span>&gt;</code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;环视&quot;&gt;&lt;a href=&quot;#环视&quot; class=&quot;headerlink&quot; title=&quot;环视&quot;&gt;&lt;/a&gt;环视&lt;/h3&gt;&lt;h4 id=&quot;什么是环视&quot;&gt;&lt;a href=&quot;#什么是环视&quot; class=&quot;headerlink&quot; title=&quot;什么是环视&quot;&gt;&lt;/a&gt;什么是环</summary>
      
    
    
    
    
    <category term="java" scheme="http://blog.lzlz.site/tags/java/"/>
    
  </entry>
  
</feed>
